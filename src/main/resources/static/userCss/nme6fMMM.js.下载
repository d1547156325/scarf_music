define(["core/config","core/utils","tmpl/common/report/report","widget/toast/toast"],function(t,n,e,i){var r={};var o={baseEl:$(".music-body"),apiParam:{report_id:0,type:0,type_id:0},innerSelect:".report-tmpl"};var a=function(t){r.options=$.extend(o,t);r.$base=r.options.baseEl;r.$reportInner=$(r.options.innerSelect,r.$base);if(!r.$reportInner||r.$reportInner.length==0){r.$reportInner=$('<div class="report-tmpl"></div>').appendTo(r.$base)}p();c()};var c=function(){r.$reportInner.off().on("click","a.close",function(){r.$reportInner.hide()}).on("click",".commit",function(){var e=$("input[class='rp']:checked");if(e.length==0){return}var i=[];e.each(function(){i.push($(this).val())});var o=$.extend(r.options.apiParam,{msg_id:r.options.apiParam.type==8?r.options.apiParam.type_id:r.options.apiParam.msg_id,report_tag:i.toString()});o.type==8?o.type=9:null;n.tingApi("baidu.ting.ugcfeedback.addInfo",o).done(function(t){s("succ","举报成功",function(){r.$reportInner.hide()})}).fail(function(n){var e="举报失败";if(n){var i=t.cfg.tingApi.code;switch(n.error_code){case i.USER_UNLOGIN:e="未检测登录状态";break;case 22711:e="重复举报";break}}s("fail",e)})})},p=function(){n.tingApi("baidu.ting.ugcfeedback.getlist",{}).done(function(t){r.$reportInner.html(e(t)).show()})},s=function(t,n,e){i.show({innerSelect:".toast-tmpl",data:{cls:t,text:n},callback:e})};return{init:function(t){a(t)}}});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/