define(["sug/autoComplete","plugin/_"],function(){var e=$("#search_form"),o=$("#ww"),n=$('input[type="submit"]',e),t=o.data("random"),a=$.trim(o.data("value"));ting.sugControl=true;if(t){t=_.values(t);t=t[_.random(0,t.length-1)];t=_.isString(t)?t:t.query;a=t}$.widget("ui.placeholder",{options:{placeholder:""},_create:function(){var e=this.element,o=this.options.placeholder||e.data("default");e.wrap("<span></span>").parent().addClass("ui-placeholder-container");var n=$('<label for="'+e.attr("id")+'">'+o+"</label>").insertBefore(e).addClass("ui-placeholder-label");if(e.val()){n.hide()}e.on("focus.placeholder",function(){if(!this.value){n.hide()}}).on("blur.placeholder",function(){if(!this.value){n.show()}})}});o.placeholder({placeholder:t});var l=function(n){if($(".urank-module").length<1){var t=$.trim(o.val());if(!t||!t.length){if(a.length){ting.logger.log("clicksearch",{page:"suglog",key:a,pos:"sug_default",sub:"default",module:"default"});setTimeout(function(){location.href="/search?key="+encodeURIComponent(a)},500)}else{window.location.href="/"}}else{ting.logger.log("clicksearch",{page:"search_num",key:t});setTimeout(function(){if(!ting.sugControl){return}$(e).submit()},500)}}};o.bind("keydown",function(e){if(e.keyCode!=13)return true;l(e)});n.bind("click",l);$("#search_form").autoComplete().bind("auto.change",function(e,o){var n=location.protocol;var t=n+"//sug.qianqian.com/info/suggestion?format=json&word="+encodeURIComponent(o.keyword)+"&version=2&from=web&callback=window.baidu.sug&third_type=0&client_type=0";ting.connect.getMusicSuggestion(null,{wd:o.keyword},function(e){o.handleReady(e.data)},null,t)}).bind("auto.commonlog",function(e,n){var t=o.val();if(!$.trim(t)){return}else{ting.logger.log("clicksearch",{page:"search_num",key:t})}}).bind("auto.suggestionlog",function(e,o){var n=$("#ww").val();ting.logger.log("clicksearch",{page:"suglog",pos:"sug_"+o.channelName,sub:o.sugType,module:o.currentItem.parent().data("module"),key:n})})});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/