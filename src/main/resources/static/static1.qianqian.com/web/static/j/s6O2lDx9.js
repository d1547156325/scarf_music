(function(t){t.widget("ting.songlistExpand",{options:{songlistDiv:".songlist-expand",actionHook:".action-hook",type:"",id:"",url:"/data/music/songlist",hotBar:false,moduleName:null,noAlbum:false},_create:function(){var t=this,a=t.element,i=t.options;t.widgetEventPrefix="songlistexpand.";t.$albumItem=a.parents("li");t.$action=a.find(i.actionHook);t.$songlistDiv=t.$albumItem.find(i.songlistDiv);t.type=a.data("songlistexpand").type||i.type;t.id=a.data("songlistexpand").id||i.id;t.name=a.data("songlistexpand").name||i.name;t.loaded=false},_init:function(){var a=this,i=a.element,n=a.options;i.bind("click",function(){if(i.hasClass("fold")){if(!a.loaded){a.expandSongs(a.type,a.id,a.name);a.loaded=true}else{a.display(a.$songlistDiv,"show")}i.removeClass("fold").addClass("unfold");a.$action.text("收起");if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("unfold")}}else{a.display(a.$songlistDiv,"hide");i.removeClass("unfold").addClass("fold");a.$action.text("展开");if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("fold")}}return false});a.$albumItem.find("http://static1.qianqian.com/web/static/j/div.info").bind("mouseenter",function(a){t(this).addClass("bgc-gray")}).bind("mouseleave",function(a){t(this).removeClass("bgc-gray")}).bind("click",function(a){var n=a.target;var e=t(n).parents(".btn");var o=t(n).parents(".album-face, .artist-face");var s=n.className;var l=n.tagName.toLowerCase();if(l!=="a"&&l!=="em"&&s!=="frame"&&!e.length&&!o.length){i.click()}})},expandSongs:function(a,i,n){var e=this;opt=e.options;e.$songlistDiv.addClass("loading-data");e.display(e.$songlistDiv,"show");var o=opt.hotBar?"hotbar=1":"",s=opt.moduleName?"&moduleName="+opt.moduleName:"",l=opt.noAlbum?"&noAlbum=1":"",r=opt.url+"?"+o+s+l;t.ajax({type:"POST",url:r,data:{id:i,type:a},dataType:"json",success:function(a){var i=a;var o=i.errorCode;var s=i.data.html;if(o=="22000"&&s){e.$songlistDiv.append(t(s)).removeClass("loading-data");e.$songlistDiv.find(".song-list-hook").songList({type:"album",data:{albumname:n}});e.$songlistDiv.find(".music-icon-hook").musicIcon()}else if(o="22001"){e.$songlistDiv.append("<p style='text-align:center;' class='no-data c9'>该专辑暂无歌曲</p>").removeClass("loading-data")}e._trigger("expanded")}})},display:function(t,a){t.animate({height:a,opacity:a},"fast");if(a=="show"){this.$albumItem.removeClass("bb").addClass("bbs")}else{this.$albumItem.removeClass("bbs").addClass("bb")}}})})(jQuery);(function(t){t(function(){t("#ting_recommend .album-cover-hook").albumCover();t("#target_album .album-cover-hook").albumCover();t("#album_list .album-cover-hook").albumCover();t("#ting_recommend .rool-hook").roll({rollNum:5,screen:".rool-inner",rollList:".rool-inner ul",leftBtn:".rool-left-btn",rightBtn:".rool-right-btn"});t(".play-hotsong-hook").bind("click",function(){var a=t(this).data("playdata").ids,i={moduleName:t(this).data("playdata").moduleName,searchValue:t(this).data("playdata").searchValue};ting.media.playSong(a,i);return false});t(".album-add").bind("click",function(){var a=t(this).data("adddata").id,i={moduleName:t(this).data("adddata").moduleName,searchValue:t(this).data("adddata").searchValue};ting.media.playAlbum(a,i);$me.tip();$me.tip("tipup",{msg:"添加成功！",iconClass:"tip-success"})});t("#album_list .songlist-fold-hook").songlistExpand({moduleName:"albumlist",noAlbum:true});t("#artist_list .songlist-fold-hook").songlistExpand({moduleName:"artisthotsong"});require(["page/songlist/index"],function(){});require(["page/uuser/friend"],function(){});if(t(".copy-lyric").length){var a=new ZeroClipboard(null,{moviePath:"../../../static/flash/ZeroClipboard.swf"/*tpa=http://static1.qianqian.com/static/flash/ZeroClipboard.swf*/});a.on("load",function(){t(".copy-lyric-hook").show()});var i=null;a.on("complete",function(a,n){t(i).tip({msg:"复制成功",iconClass:"tip-success"});t(i).tip("tipup")});t(".copy-lyric").live("mouseenter",function(){var n=t(this)[0];a.setCurrent(n);i=n})}t("#lrc_list .down-lrc-btn").click(function(){window.location=t(this).metadata().href;return false});var n=t('input[name="key"]').val();var e=t("#query_type").val();var o=t("#tpl_type").val();var s=function(a,i,s){var l={page:"searchresult",sub:e,logtype:i,key:n},r=t("#result_container").data("tagstyle");if(r){l.tag=r}if(a){l.pos=a}if(o){l.Template=o}else{l.Template="search"}if(s){for(var c in s){l[c]=s[c]}}ting.logger.log("clicksearch",l)};s(null,"exposure_pv");var l=function(a){var i=t(a),n=a.tagName.toLowerCase(),e={};if(n==="a"||i.parents("a").length){var o=n==="a"?i:i.parents("a");e.isLink=true;e.lnk=o;if(o.hasClass("btn")){e.isLink=o.hasClass("btn-disabled")?false:true;e.lnkType="btn"}else if(o.hasClass("list-micon")){e.lnkType="ico"}else if(o.children("img").length){e.lnkType="img"}else{e.lnkType="txt"}}else{e.isLink=false}return e};var r=function(a){var i=t(a).parents("li.song-item-hook");if(i.length){var n=i.data("songitem").songItem.sid;if(n&&isNaN(n)){return true}}return false};var c=function(a,i,n){var e=0;t(a).each(function(){t(this).bind("mousedown",function(a){var o=l(a.target),c=o.isLink,g={};if(/group-/.test(i)){g.act="detailpage"}if(c){var d=o.lnk,u=o.lnkType,m=false;g.linktype=u,$item=d.parents("li.song-item-hook");g.resourcetype=0;if(u==="txt"||u==="ico"){m=r(d);if(m){g.resourcetype=1}}try{var p=d.parents(".song-item-hook").data("songitem").songItem;g.song_id=p.sid;g.original_song_id=p.oid}catch(a){}switch(u){case"ico":var f=d.data("action");g.act=f==="add"||f==="play"?"audio":f;break;case"btn":if(d.hasClass("play-selected-hook")||d.hasClass("add-selected-hook")){g.act="audio"}else if(d.hasClass("collect-selected-hook")){g.act="collect"}break;case"txt":if($item.length&&!(m&&d.parents(".song-title").length||d.children(".unreleased").length)){if(d.parents(".song-title").length){g.act="song_name"}else if(d.parents(".singer").length){g.act="artist_name"}else if(d.parents(".album-title").length){g.act="album_name"}else{g.act="detailpage"}}else if(d.hasClass("album-play")||d.hasClass("play-hot-btn")||d.hasClass("songlist-all-play")){g.act="play"}break;default:break}if(d&&d.hasClass("master-song")){if(d.hasClass("fold-down")){g.act="unfold"}else{g.act="fewer"}}if($item.length){if(t(".master-song",$item).length){g.u_tag="unfold_0"}}}if(c&&e==0){if(n===undefined){s(i,"click_pv",g);e=1}else if(n=="click_num"){var h=t(a.target);var v={};var b=h.parents(".song-item-hook").data("log-recommend");if(b){v.recommend=b}v.page_num=t(".page-navigator-current").html()||1;v.position=t(".song-item").index(h.parents(".song-item"));t.extend(g,v);s(i,"click_num",g)}}})})};if(t("#target_banner").length){c("#target_banner .target-artist","targetbanner_artist");c("#target_banner .target-album","targetbanner_album");c("#target_banner .target-tag","targetbanner_tag");c("#target_banner .target-artist","targetbanner_artist","click_num");c("#target_banner .target-album","targetbanner_album","click_num");c("#target_banner .target-tag","targetbanner_tag","click_num")}c("#result_container .song-list","resultcontent");c("#first_song_li","firstsong");c("#first_artist_li","firstartist");c("#first_album_li","firstalbum");c("#first_lrc_li","firstlrc");c("#result_container .song-list","resultcontent","click_num");c("#rec_tag","recommend_tag");c("#rec_tag","recommend_tag","click_num");c(".group-album a","group-album");c(".group-album a","group-album","click_num");c(".group-artist a","group-artist");c(".group-artist a","group-artist","click_num");c(".group-songlist a","group-songlist");c(".group-songlist a","group-songlist","click_num");c(".group-mv a","group-mv");c(".group-mv a","group-mv","click_num");c(".group-ybaidu a","group-ybaidu");c(".group-ybaidu a","group-ybaidu","click_num");c("#rec-movie-list a","rec-movie-list");c("#rec-movie-list a","rec-movie-list","click_num");ting.DM=".baidu.com";if(location.host.indexOf("http://static1.qianqian.com/web/static/j/taihe.com")!=-1){ting.DM=".taihe.com"}else if(location.host.indexOf("http://static1.qianqian.com/web/static/j/qianqian.com")!=-1){ting.DM=".qianqian.com"}var g=t(".btn-singer-fm");g.bind("click",function(){var a=encodeURIComponent(t(this).attr("artist"));if(t(this).attr("href")=="#"){t(this).attr("href","//fm"+ting.DM+"/#/channel/public_artist_"+a)}})});function a(){var a=t(".fwb").html()||"empty",i=t("input",t("#questions")).eq(0).attr("checked")?0:1,n=t("#user-suggest").val()||"";ting.logger.log("search_null",{key:a,content:n,num:i})}var i=t(".search-artist");if(i.length){var n=t("li",i);var e;n.each(function(a,i){i=t(i);i.on("mouseenter",function(){var a=t(this),i=a.find(".hot-info"),n=i.data("num");if(n){if(!e){a.append('<div id="listen-indicator">'+n+"人听过</div>");e=t("#listen-indicator")}i.append(e.remove());e.html(n+"人听过");e.show()}});i.on("mouseleave",function(){e&&e.hide()})})}t(".group-album .album-cover-hook").albumCover();t(".group-songlist .songlist-all-play").click(function(){var a=t(this),i=t(this).data("song").listid,n=a.data("song"),e=n.ids,o={moduleName:n.moduleName,searchValue:n.searchValue},s=n.logAction;ting.media.playSong(e,o);a.tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"});t.ajax({url:"/data/music/songlist/listen?playlistId="+i+"&t="+new Date*1});if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick(s)}if(ting.browser.isSpecial()){ting.browser.add2box("play")}return false});if(similarMboxBtn=t("#similarMbox")){mboxPage=similarMboxBtn.attr("mboxpage");ting.logger.log("exposure",{page:mboxPage,expoitem:"enter_radio"});similarMboxBtn.click(function(){ting.logger.log("click",{page:mboxPage,pos:"enter_radio",sub:""})})}t(".group-artist .play-hot-btn").bind("click",function(){var a={},i=t(this),n=i.data("playdata");if(n.ids){ting.media.playSong(n.ids,{moduleName:n.moduleName,searchValue:n.searchValue||""});i.tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"})}return false});t("#film-change").on("click",function(){require(["slider/slider"],function(a){new a(t("#rec-movie-list"),t("#film-change"),250,"changeRight")});t(this).off("click")});t(".music-icon-hook").musicIcon();t(".rec-film-all-play").click(function(){var a=t(this),i=a.data("song"),n=i.ids,e={moduleName:i.moduleName,searchValue:i.searchValue||""},o=i.logAction;ting.media.playSong(n,e);a.tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"});if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick(o)}if(ting.browser.isSpecial()){ting.browser.add2box("play")}return false})})(jQuery);(function(){var t=t||{};t.tipLogger=function(t,a,i){ting.logger.log("click",{page:t,pos:a,sub:i})};t.clickLogger=function(a,i,n,e){$(a).click(function(){t.tipLogger(i,n,e)})};t.clickLogger(".ticket-link","m_search_artist","normal","tips")})();(function(){var t=$(".search-song-list ul li");var a=[];var i=[];var n=[];var e=$(".col-play");var o=$(".col-add");var s=$(".col-collect");var l=$(".col-down a");var r=$(".search-song-list").data("listdata");t.each(function(){if(!$(this).data("songitem").songItem.isJump){a.push($(this).data("songitem").songItem.sid)}});i=a.join("_");n=a.join(",");e.bind("click",function(){if(i){ting.media.playSong(i,r);$(this).tip().tip("tipup",{msg:"已开始播放！",iconClass:"tip-success"})}return false});o.bind("click",function(){if(i){ting.media.addSong(i,r);$(this).tip().tip("tipup",{msg:"添加成功！",iconClass:"tip-success"})}return false});s.bind("click",function(){if($(".song-item.yyr-song").length){var t=$('<div style="text-align: left;">您需要访问 <a target="_blank" href="http://y.baidu.com/">太合音乐人</a>平台，获取音乐下载。</div>');var a=$("a.cover").attr("href");t.dialog({className:"dialog-message",showBtn:true,confirm:{btn:"",close:true,callback:function(){window.open(a)},text:"立即去下载"},cancel:false,destroy:true,title:"&nbsp;",width:360,showBg:true}).dialog("show");return false}var i=n;if($(this).hasClass("dis-col-collect")){return false}ting.connect.collect(null,{ids:i,type:"song"},function(t){s.tip().tip("tipup",{msg:"已保存到收藏列表！",iconClass:"tip-success"})},function(t){s.tip().tip("tipup",{msg:"歌曲已被保存",iconClass:"tip-warning"})});return false});l.bind("click",function(){if($(".song-item.yyr-song").length){var t=$('<div style="text-align: left;">您需要访问 <a target="_blank" href="http://y.baidu.com/">太合音乐人</a>平台，获取音乐下载。</div>');var i=$("a.cover").attr("href");t.dialog({className:"dialog-message",showBtn:true,confirm:{btn:"",close:true,callback:function(){window.open(i)},text:"立即去下载"},cancel:false,destroy:true,title:"&nbsp;",width:360,showBg:true}).dialog("show");return false}if($(this).parent().hasClass("dis-col-down")){return false}ting.media.downloadAll(a);return false});var c=location.search.substring(1).split("&"),g={};$.each(c,function(t,a){a=a.split("=");g[a[0]]=a[1]});if(g.m==="tagcloud"){ting.logger.log("clicksearch",{key:g.key,page:"searchresult",pos:"tagcloud",sub:"song"})}})();(function(){function t(t,a){$(t).find(".changenother").bind("click",function(){var i=$(a).index();var n=$(t).find(".group-list").length-1;if(i<n){i++;$(t).find(".group-list").removeClass("now-tab");$(t).find(".group-list").eq(i).addClass("now-tab")}else{i=0;$(t).find(".group-list").removeClass("now-tab");$(t).find(".group-list").eq(i).addClass("now-tab")}return false})}t(".group-songlist",".group-songlist .now-tab");t(".group-album",".group-album .now-tab");t(".group-artist",".group-artist .now-tab");t(".group-mv",".group-mv .now-tab");var a=0,i=false;$("#updateArtist").bind("click",function(){var t=$(".related-list"),n=$(".related-list:visible");n.hide();++a;if(a>=t.length){a=0;i=true}if(!i){$(".cover img",$(t[a])).each(function(){var t=$(this).attr("org_src"),a=$(this).attr("src");if(t!=a){$(this).attr("src",t)}})}$(t[a]).show();return false})})();(function(t){var a=t(".mod-artist-list ul");var i=a.length;var n=1;t(".mod-artist-list a.more").click(function(){n=n==i?1:n+1;a.fadeOut(200).promise().done(function(){a.eq(n-1).fadeIn(200)});return false})})(jQuery);require(["tmpl/common/pop_window/pop_cantPlay","tmpl/common/pop_window/pop_cantNoMv"],function(t,a){$(".music-main").append('<div id="pop-hui" class="pop-hui-dis"></div>');var i=$("#pop-hui"),n=null,e=null,o=null;init_mv=function(a){i.html(t({datamv:a}))};init_nomv=function(t){i.html(a())};romance=function(){i.removeClass("pop-hui-dis");if(n){init_mv(n)}else{init_nomv()}};$("body").on("click",".close-window-hook",function(){i.addClass("pop-hui-dis")});$("body").on("click",".song-message-gray .icon-play-disabled",function(){n=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});$("body").on("click",".song-message-gray .icon-add-disabled",function(){n=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});$("body").on("click",".song-message-gray .icon-download-disabled",function(){n=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});$("body").on("click",".song-message-gray .icon-collects-disabled",function(){n=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});$("body").on("click",".song-message-gray .icon-send-disabled",function(){n=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});init_song_mv=function(a){i.html(t({datamv:a}))};init_song_nomv=function(t){i.html(a())};romance_song=function(){i.removeClass("pop-hui-dis");if(e){init_song_mv(o)}else{init_song_nomv()}};if($(".play-all-disabled").length){$("body").on("click",".song-opera .tool-btn-disabled",function(){e=$(this).parent().parent().parent().find(".mv-item-unic").data("mv");o=e;romance_song()});$("body").on("click",".song-opera .song-collect-disable",function(){e=$(this).parent().parent().parent().find(".mv-item-unic").data("mv");o=e;romance_song()});$("body").on("click",".song-opera .play-all-disabled",function(){e=$(this).parent().parent().parent().find(".mv-item-unic").data("mv");o=e;romance_song()})}$("body").on("click",".songn-info-box .gray",function(){var t=window.location.href.split("/");e=$(".song-img").data("mvid");o=t[0]+"//"+t[2]+"/playmv/"+e;romance_song();return});$("body").on("click",".songpage-fixed .gray",function(){var t=window.location.href.split("/");e=$(".song-img").data("mvid");o=t[0]+"//"+t[2]+"/playmv/"+e;romance_song()});$("body").on("click",".list-menu .gray",function(){var t=window.location.href.split("/");if($(this).data("hasmv")){e=$(this).data("songid")}else{e=null}o=t[0]+"//"+t[2]+"/mv/"+e;romance_song()})});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/