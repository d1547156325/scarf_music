(function(e){e.fn.lightBox=function(i){i=jQuery.extend({overlayBgColor:"#000",overlayOpacity:.8,fixedNavigation:false,imageLoading:"images/lightbox-ico-loading.gif"/*tpa=http://static1.qianqian.com/web/static/j/images/lightbox-ico-loading.gif*/,imageBtnPrev:"images/lightbox-btn-prev.gif"/*tpa=http://static1.qianqian.com/web/static/j/images/lightbox-btn-prev.gif*/,imageBtnNext:"images/lightbox-btn-next.gif"/*tpa=http://static1.qianqian.com/web/static/j/images/lightbox-btn-next.gif*/,imageBtnClose:"images/lightbox-btn-close.gif"/*tpa=http://static1.qianqian.com/web/static/j/images/lightbox-btn-close.gif*/,imageBlank:"images/lightbox-blank.gif"/*tpa=http://static1.qianqian.com/web/static/j/images/lightbox-blank.gif*/,containerBorderSize:10,containerResizeSpeed:400,txtImage:"Image",txtOf:"of",keyToClose:"c",keyToPrev:"p",keyToNext:"n",imageArray:[],activeImage:0},i);var t=this;function a(){n(this,t);return false}function n(t,a){e("embed, object, select").css({visibility:"hidden"});o();i.imageArray.length=0;i.activeImage=0;if(a.length==1){i.imageArray.push(new Array(t.getAttribute("href"),t.getAttribute("title")))}else{for(var n=0;n<a.length;n++){i.imageArray.push(new Array(a[n].getAttribute("href"),a[n].getAttribute("title")))}}while(i.imageArray[i.activeImage][0]!=t.getAttribute("href")){i.activeImage++}r()}function o(){e("body").append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+i.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+i.imageBtnClose+'"></a></div></div></div></div>');var t=f();e("#jquery-overlay").css({backgroundColor:i.overlayBgColor,opacity:i.overlayOpacity,width:t[0],height:t[1]}).fadeIn();var a=v();e("#jquery-lightbox").css({top:a[1]+t[3]/10,left:a[0]}).show();e("#jquery-overlay,#jquery-lightbox").click(function(){u()});e("#lightbox-loading-link,#lightbox-secNav-btnClose").click(function(){u();return false});e(window).resize(function(){var i=f();e("#jquery-overlay").css({width:i[0],height:i[1]});var t=v();e("#jquery-lightbox").css({top:t[1]+i[3]/10,left:t[0]})})}function r(){e("#lightbox-loading").show();if(i.fixedNavigation){e("#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}else{e("#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber").hide()}var t=new Image;t.onload=function(){e("#lightbox-image").attr("src",i.imageArray[i.activeImage][0]);g(t.width,t.height);t.onload=function(){}};t.src=i.imageArray[i.activeImage][0]}function g(t,a){var n=e("#lightbox-container-image-box").width();var o=e("#lightbox-container-image-box").height();var r=t+i.containerBorderSize*2;var g=a+i.containerBorderSize*2;var c=n-r;var d=o-g;e("#lightbox-container-image-box").animate({width:r,height:g},i.containerResizeSpeed,function(){l()});if(c==0&&d==0){if(e.browser.msie){x(250)}else{x(100)}}e("#lightbox-container-image-data-box").css({width:t});e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({height:a+i.containerBorderSize*2})}function l(){e("#lightbox-loading").hide();e("#lightbox-image").fadeIn(function(){c();d()});b()}function c(){e("#lightbox-container-image-data-box").slideDown("fast");e("#lightbox-image-details-caption").hide();if(i.imageArray[i.activeImage][1]){e("#lightbox-image-details-caption").html(i.imageArray[i.activeImage][1]).show()}if(i.imageArray.length>1){e("#lightbox-image-details-currentNumber").html(i.txtImage+" "+(i.activeImage+1)+" "+i.txtOf+" "+i.imageArray.length).show()}}function d(){e("#lightbox-nav").show();e("#lightbox-nav-btnPrev,#lightbox-nav-btnNext").css({background:"transparent url("+i.imageBlank+") no-repeat"});if(i.activeImage!=0){if(i.fixedNavigation){e("#lightbox-nav-btnPrev").css({background:"url("+i.imageBtnPrev+") left 15% no-repeat"}).unbind().bind("click",function(){i.activeImage=i.activeImage-1;r();return false})}else{e("#lightbox-nav-btnPrev").unbind().hover(function(){e(this).css({background:"url("+i.imageBtnPrev+") left 15% no-repeat"})},function(){e(this).css({background:"transparent url("+i.imageBlank+") no-repeat"})}).show().bind("click",function(){i.activeImage=i.activeImage-1;r();return false})}}if(i.activeImage!=i.imageArray.length-1){if(i.fixedNavigation){e("#lightbox-nav-btnNext").css({background:"url("+i.imageBtnNext+") right 15% no-repeat"}).unbind().bind("click",function(){i.activeImage=i.activeImage+1;r();return false})}else{e("#lightbox-nav-btnNext").unbind().hover(function(){e(this).css({background:"url("+i.imageBtnNext+") right 15% no-repeat"})},function(){e(this).css({background:"transparent url("+i.imageBlank+") no-repeat"})}).show().bind("click",function(){i.activeImage=i.activeImage+1;r();return false})}}m()}function m(){e(document).keydown(function(e){s(e)})}function h(){e(document).unbind()}function s(e){if(e==null){keycode=event.keyCode;escapeKey=27}else{keycode=e.keyCode;escapeKey=e.DOM_VK_ESCAPE}key=String.fromCharCode(keycode).toLowerCase();if(key==i.keyToClose||key=="x"||keycode==escapeKey){u()}if(key==i.keyToPrev||keycode==37){if(i.activeImage!=0){i.activeImage=i.activeImage-1;r();h()}}if(key==i.keyToNext||keycode==39){if(i.activeImage!=i.imageArray.length-1){i.activeImage=i.activeImage+1;r();h()}}}function b(){if(i.imageArray.length-1>i.activeImage){objNext=new Image;objNext.src=i.imageArray[i.activeImage+1][0]}if(i.activeImage>0){objPrev=new Image;objPrev.src=i.imageArray[i.activeImage-1][0]}}function u(){e("#jquery-lightbox").remove();e("#jquery-overlay").fadeOut(function(){e("#jquery-overlay").remove()});e("embed, object, select").css({visibility:"visible"})}function f(){var e,i;if(window.innerHeight&&window.scrollMaxY){e=window.innerWidth+window.scrollMaxX;i=window.innerHeight+window.scrollMaxY}else if(document.body.scrollHeight>document.body.offsetHeight){e=document.body.scrollWidth;i=document.body.scrollHeight}else{e=document.body.offsetWidth;i=document.body.offsetHeight}var t,a;if(self.innerHeight){if(document.documentElement.clientWidth){t=document.documentElement.clientWidth}else{t=self.innerWidth}a=self.innerHeight}else if(document.documentElement&&document.documentElement.clientHeight){t=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else if(document.body){t=document.body.clientWidth;a=document.body.clientHeight}if(i<a){pageHeight=a}else{pageHeight=i}if(e<t){pageWidth=e}else{pageWidth=t}arrayPageSize=new Array(pageWidth,pageHeight,t,a);return arrayPageSize}function v(){var e,i;if(self.pageYOffset){i=self.pageYOffset;e=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){i=document.documentElement.scrollTop;e=document.documentElement.scrollLeft}else if(document.body){i=document.body.scrollTop;e=document.body.scrollLeft}arrayPageScroll=new Array(e,i);return arrayPageScroll}function x(e){var i=new Date;t=null;do{var t=new Date}while(t-i<e)}return this.unbind("click").click(a)}})(jQuery);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/