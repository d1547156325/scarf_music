void function(e){e.widget("ting.albumCover",{options:{albumId:null},_create:function(){var a=this,i=a.element;var l=a.options;e(".play-icon",i).bind("click",function(t){if(e(this).find(".play-all").hasClass("play-all-disabled")){return}if(e(this).find("a").hasClass("play-all")){if(!a.albumAllSongState(i)){return}}var s=i;var n=i.data("albumdata"),o=n.id,u={moduleName:n.moduleName,searchValue:n.searchValue||"",mediaType:2,albumId:n.id||"",_aiPresaleFlag:n._aiPresaleFlag||"",resourceTypeExt:n.resourceTypeExt||"",albumPic:n.albumPic||"",albumTitle:n.albumTitle||"",albumPublishTime:n.albumPublishTime||""};var r=n.playIDs||"";var p=n.playFeeIDs||"";var m=r.length||0;var g=p.length||0;var c=n.ids||"";var r=n.playIDs||"";s.tip();var d={page:ting.logger.getPage(),pos:"play_album"};if(o||l.albumId){if(i.data("source")==="m"){if(!u.resourceTypeExt){e.when(e.ajax({type:"POST",dataType:"json",async:false,url:"/data/album/info?id="+u.albumId,data:""})).done(function(e){var a=e.data[u.albumId];u.resourceTypeExt=a.resource_type_ext;u.albumTitle=a.title;u.albumPic=a.pic_s180;b()})}else{b()}function b(){if(u.resourceTypeExt&&(u.resourceTypeExt==3||u.resourceTypeExt==4)){ting.checkSellResourse(u.id,u.albumId,function(e,a){u.isPay=a;ting.media.playAlbum(o||u.albumId,u);if(u.isPay!=1||u.siPresaleFlag==1||u._aiPresaleFlag==1){f("notTip")}else{}});d.album_title=u.albumTitle;d.album_id=u.albumId;d.isPay=3}else if(BDUS&&BDUS.vipState!="gold"){ting.checkSellResourse("",u.albumId,function(e,a){u.isPay=a;if(u.isPay!=1){if(m){if(g){ting.media.playSong(r,u);s.tip("tipup",{msg:"已自动过滤付费歌曲",iconClass:"tip-success"})}else{ting.media.playAlbum(o||u.albumId,u);s.tip("tipup",{msg:"已开始播放！",iconClass:"tip-success"})}}else{if(g){y(s,"pay_listen")}else{s.tip("tipup",{msg:"已开始播放！",iconClass:"tip-success"});ting.media.playAlbum(o||u.albumId,u)}}}else{ting.media.playAlbum(o||u.albumId,u);s.tip("tipup",{msg:"已开始播放！",iconClass:"tip-success"})}})}else{ting.media.playAlbum(o||u.albumId,u);f()}}}else{ting.media.playSong(n.songid,u);f()}function f(a){if(a=="notTip"){return false}e(t.target).tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"})}var y=function(e,a){ting.showTip({$tar:e,type:"needgoldvip",cancelEvent:"blur",reason:a})};if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("play_album");ting.logger.log("play_album",d)}if(ting.browser.isSpecial()){ting.browser.add2box("play")}}});e(i).bind({mouseover:function(){i.find(".cover-layer").show()},mouseout:function(){i.find(".cover-layer").hide()}})},albumAllSongState:function(a){var i=0,l=0;if(e(".mod-song-info").length){i=e(a).parents(".mod-song-info").find(".song-item-hook").length;l=e(a).parents(".mod-song-info").find(".song-message-gray").length}if(i==l&&i!=0&&l!=0){require(["tmpl/common/pop_window/pop_cantNoMv"],function(a){var i=e("#pop-hui");i.html(a("因为版权保护问题这张专辑暂时无法播放，"));i.removeClass("pop-hui-dis")});return false}else{return true}}})}(jQuery);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/