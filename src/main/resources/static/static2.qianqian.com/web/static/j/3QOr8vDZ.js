require(["core/utils","tmpl/huodong/rl/progress","tmpl/huodong/rl/bang","tmpl/huodong/rl/listItem","page/huodong/dfrc/list","widget/toast/toast","domain_config"],function(e,t,i,n,o,a,l){var s=$(".index-rule");s.on("click",".rule-hook",function(e){s.find(".rule-text").show()}).on("click",".close",function(e){s.find(".rule-text").hide()});$(".contral").on("click",function(){if($(".content-wrap").hasClass("hid")){$(".contral").removeClass("hid-btn");$(".contral").addClass("show-btn")}else{$(".contral").removeClass("show-btn");$(".contral").addClass("hid-btn")}$(".content-wrap").toggleClass("show");$(".content-wrap").toggleClass("hid")});var c=null;var r=$("#progressTmpl");e.tingApi(["baidu.ting.active.getActTime"],{activity_id:activityId}).done(function(e){var i=c=e.result;r.html(t({data:i}));r.on("click",".haixuan-hook",function(e){h()}).on("click",".fuhuo-hook",function(e){getWeekTab()});var n={bdText:"“瑞丽模特大赛千千音乐分赛区”重磅开启~让美丽的天使微笑在美好的年纪绽放！",bdDesc:"“瑞丽模特大赛千千音乐分赛区”重磅开启~让美丽的天使微笑在美好的年纪绽放！",bdUrl:l.host+"/cms/webview/rayligirls/index.html",bdPic:l.getStaticUrl({isProtocol:true})+"/web/static/i/bNQCXkyv.png"};if(i.baoming_time==1){n=$.extend(n,{bdText:"“瑞丽模特大赛”报名开始！小仙女们快跟上，别给青春留遗憾~"})}getWeekId().then(function(){if(i.juesai_time==1){n=$.extend(n,{bdText:"这里的颜值绝对逆天！谁将成为“瑞丽女孩”？她们的晋级之路掌握在你手中！"});h(0)}else if(i.fuhuo_time==1){getWeekList(0)}});bdShare(n)});var d=$("#bangTmpl"),u=["new","week"],g={type:u[0],page:0,size:10,have_more:0,plugin:{week_id:0}};var h=function(t){t=t||0;e.tingApi("baidu.ting.active.getWeekBillList",{activity_id:activityId,week_id:f.hx,offset:t,limit:g.size}).always(function(e){g=$.extend(g,{type:u[0],page:t>0?++g.page:1,have_more:e.have_more||0});g.size=e&&e.result&&e.result.length;if(t>0){loadMoreList(e,t)}else{d.html(i({tab1:u[0],tab2:null,list:e.result||[],offset:t,vote:e.has_vote||10}));o.init()}})},f={};getWeekId=function(){return e.tingApi("baidu.ting.active.getWeekAreaList",{activity_id:activityId}).then(function(e){$.each(e.result,function(e){if(e.title=="海选赛"){f.hx=e.sid}else if(e.title=="复活赛"){f.fh=e.sid}else{f.hx=e.sid}});return f})},getWeekList=function(t){t=t||0;e.tingApi("baidu.ting.active.getWeekBillList",{activity_id:activityId,week_id:f.fh,offset:t,limit:g.size}).always(function(e){g=$.extend(g,{type:u[1],page:t>0?++g.page:1,have_more:e.have_more||0,plugin:{week_id:f.fh}});if(t>0){loadMoreList(e,t)}else{d.html(i({tab1:u[1],tab2_key:f.fh,list:e.result||[],offset:t,vote:e.has_vote||0}));o.init()}})},loadMoreList=function(e,t){t=t||0;$(".ws-list table",d).append(n({aid:15,list:e.result||[],offset:t}))};d.on("search",function(t){var i=d.find("#search").val();if($.trim(i)!==""&&i!=="搜索选手编号"){e.tingApi("baidu.ting.active.searchAGC",{activity_id:activityId,item_id:i}).done(function(e){e=e.result;window.location="http://static2.qianqian.com/hd/rayligirls/person/"+e.item_id}).fail(function(){a.show({data:{cls:"fail",text:"未搜索到该选手"}})})}}).on("click",".search-hook",function(e){d.trigger("search")});var v=null;$(window).on("scroll",function(){var e=$(this);clearTimeout(v);if(!g.have_more){return}v=setTimeout(function(){if($("body").scrollTop()+e.height()>=$("body").height()-1e3){switch(g.type){case u[0]:h(g.page*g.size);break;case u[1]:getWeekList(g.page*g.size);break}}},500)});$("#rz-kthy").live("click",function(){ting.logger.log("click",{page:"activeshow_ruili",sub:"pay",pos:"index ",player:""})});$(".rz-tp-index").live("click",function(){ting.logger.log("click",{page:"activeshow_ruili",sub:"vote",pos:"index ",player:""})})});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/