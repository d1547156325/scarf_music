define(["core/utils","../vip/top_right_menu"],function(e){var n=/\/king/.test(location.pathname);var i=location.protocol;ting.DM=".baidu.com";if(location.host.indexOf("http://static2.qianqian.com/web/static/j/taihe.com")!=-1){ting.DM=".taihe.com"}else if(location.host.indexOf("http://static2.qianqian.com/web/static/j/qianqian.com")!=-1){ting.DM=".qianqian.com"}window.enterState_taihe=function(a){var t,s,l,o,r,c,m;l=encodeURIComponent(location.href);t={sTemplate:"guest",sUserName:"",sSpaceLink:"",sProfileURL:"http://passport.baidu.com/#0,1",sHomeURL:"http://passport.baidu.com/v2/?ucenteradduname",sPaylistURL:"/paylist",sMessageURL:"/user/message",sBindURL:"/user/bind",sBaiduURL:"http://www.baidu.com/",sBaiduPrivilegeURL:"http://tequan.baidu.com/?sc=music",sBaiduMusicMall:"/mall?from=pcweb_music_qrcode",sLoginURL:"javascript:;",sRegURL:"javascript:;",sLogoutURL:"javascript:;",sOpenMbox:'<a href="javascript:void(0)" onclick="return ting.media.openPlayer(),false">音乐盒</a>',sMusicVIPURL:"/home/vip?pst=home"+(n?"&_vk=pay_k_load":""),sUsercenterURL:"/home/user",sReceiveURL:"/home/gift",enable_fee:false,sUserVipURL:"/home/vip"+(n?"?_vk=pay_k_load":""),vipIcon:"<span title='未开通VIP会员' class='power-icon-min index-icon-vipidentity'></span>",activeVipIcon:"<span title='成为音乐VIP会员' class='power-icon-min index-icon-vip-active'></span>",columnHtml:'<li><a class="my-column" href="http://static2.qianqian.com/column/manage" target="_blank" rel="nofollow"><i></i><span>我的专栏</span></a></li>',vipInfo:""};var u='<div id="menu-user" style="display:none; width:204px;" class="mn-tip mnd-tip">                             <span class="u_ddl_arrow"> <em></em> </span>                            <div class="mnd">                                 <div class="uuser-info">                                     <p class="uuser-name"><a href="#{sHomeURL}" target="_blank">#{sUserName}</a></p>                                 </div>                                 <div class="uuser-active">                                     <ul class="clearfix">                                         <li id="messageDynamic" class="left"><a href="http://static2.qianqian.com/user/dynamic" target="_blank"><i></i><span>动态</span><b>#{dynamic_num}</b></a></li>                                         <li id="messageFriend" class="center"><i></i><a href="http://static2.qianqian.com/user/friend" target="_blank"><span>关注</span><b>#{friend_num}</b></a></li>                                         <li id="messageFans" class="right"><i></i><a href="http://static2.qianqian.com/user/fans" target="_blank"><span>粉丝</span><b>#{follow_num}</b></a></li>                                     </ul>                                 </div>                                 <ul class="uuser-list">                                      #{columnHtml}                                    <li><a id="messageHint" class="my-message" href="http://static2.qianqian.com/message" target="_blank" rel="nofollow"><i></i><em></em><span>我的消息</span></a></li>                                     <li><a class="my-songlist" href="#{sHomeURL}" target="_blank" rel="nofollow"><i></i><span>我的歌单</span></a></li>                                     <li><a class="my-paylist" href="#{sPaylistURL}" target="_blank" rel="nofollow"><i></i><span>购买记录</span></a></li>                                     <li><a class="my-info" href="#{sProfileURL}" target="_blank" rel="nofollow"><i></i><span>账号设置</span></a></li>                                     <li><a class="my-bind" href="#{sBindURL}" target="_blank" rel="nofollow"><i></i><span>分享绑定</span></a></li>                                     <li><a href="#{sLogoutURL}" class="logout" id="logout" rel="nofollow"><i></i><span>退出</span></a></li>                                 </ul>                             </div>';var d=u;var f="";var p='<ul>                                 <li class="uname mn-lk-w">                                     <a id="anchor-user-name" href="#{sHomeURL}" target="_blank">                                         <i class="user-name-bd-icon"></i>                                         &nbsp;#{sSourceIcon}#{sUserName}                                     </a>'+u+"</li>                             </ul>";var g='<a rel="nofollow" href="#{sLoginURL}" id="loginbtn"><i class="user-name-bd-icon"></i>&nbsp;一键登录</a>';var v="";try{if(isHao123Header){v=isHao123Header;d=p;f=g}}catch(y){}s={guest:f,user:d};m=function(){document.getElementById("userCenter").style.display="block";document.getElementById("userCenterLine").style.display="block"};showReceive=function(){document.getElementById("receiveActive").style.display="block"};oCallbacks={guest:function(){var e=document.getElementById("loginbtn");var n=ting.passport.login||function(){ting.passport.checkLogin(function(){window.location.reload()},function(){},function(){},function(){})};if(e){if(!window.attachEvent){e.addEventListener("click",n,false)}else{e.attachEvent("onclick",n)}}else{}var i=document.getElementById("registBtn");var a=ting.passport.regist;if(i){if(!window.attachEvent){i.addEventListener("click",a,false)}else{i.attachEvent("onclick",a)}}else{}oCallbacks.invoked=true},user:function(){var n,i,a,t,s,l;n=document.getElementById("anchor-user-name");i=document.getElementById("menu-user");a=-1;t=500;s=false;l=false;function o(){if(s){if(l){i.style.display="none";if(v){n.className="anchor-user-name-bg-none"}l=false;clearInterval(a);a=-1}}}if(!!!n){return}n.onmouseenter=function(){if(!l){i.style.display="block";if(v){n.className="anchor-user-name-bg"}l=true;s=false;if(a<0){a=setInterval(o,t)}}else{o()}return false};n.onmouseleave=function(){s=true};i.onmouseover=function(){s=false};i.onmouseout=function(){s=true};setTimeout(function(){e.tingApi("baidu.ting.ugccenter.checkFollRedPoint",{typeids:"1,2"}).done(function(e){e=e.result;if(e.msg_flag&&e.msg_flag>0){if(document.getElementById("messageHint")){var n=document.getElementById("messageHint").firstChild;n.style.display="block"}}if(e.follow_flag&&e.follow_flag>0){if(document.getElementById("messageFans")){var n=document.getElementById("messageFans").firstChild;n.style.display="block"}}})},1e3);var r=function(){var e=this.firstChild;e.style.display="none"};if(!window.attachEvent){if(document.getElementById("messageFans")){document.getElementById("messageFans").addEventListener("click",r,false)}}else{if(document.getElementById("messageFans")){document.getElementById("messageFans").attachEvent("onclick",r)}}var c=e.getWebChat({setUnreadM:function(e){if(document.getElementById("messageHint")){var n=document.getElementById("messageHint").firstChild;n.style.display="block"}},setFans:function(e){if(e.serverid==10101){if(document.getElementById("messageFans")){var n=document.getElementById("messageFans").firstChild;n.style.display="block"}}}});$(".my-bind").click(function(e){ting.logger.log("click",{page:"jumppannel",pos:"sharebind"})});var m=document.getElementById("logout");var u=ting.passport.logout||function(){ting.passport.checkLogin(function(){window.location.reload()},function(){},function(){},function(){})};if(m){if(!window.attachEvent){m.addEventListener("click",u,false)}else{m.attachEvent("onclick",u)}}else{}oCallbacks.invoked=true}};function h(e,n){e=String(e);var a=Array.prototype.slice.call(arguments,1),t=Object.prototype.toString;if(a.length){if(n.thirdType=="taihe"){n.sProfileURL=i+"//passport.taihe.com/v2/web/settings.html?tpl=baidu_music"}a=a.length==1?n!==null&&/\[object Array\]|\[object Object\]/.test(t.call(n))?n:a:a;return e.replace(/#\{(.+?)\}/g,function(e,n){var i=a[n];if("[object Function]"==t.call(i)){i=i(n)}return"undefined"==typeof i?"":i})}return e}c=function(e,n){e=e||{};for(var i in t){if(e.hasOwnProperty(i)){continue}e[i]=t[i]}o=document.getElementById(a);if(o){o.innerHTML=h(s[e["sTemplate"]],e)}if(e.enable_fee){showReceive();if(e["sTemplate"]=="user"){m()}}oCallbacks[e["sTemplate"]]();if(n){n()}if(ting.vipTip)ting.vipTip.call();ting.vipTipReady=true;return false};var b=function(e){var n=$("#user-info");if(!n.length){return}if(e||v){n.html('<div class="info">                             <span class="icon-text">播放记录</span>                             <span class="icon-arrow"></span>                             </div>');n.hoverShow($("#play-info"),{onShow:function(){require(["ting/playInfo"])},onHide:function(){},delay:50})}else{n.html("").addClass("none")}};var _=function(e){if(e&&e.data){var n=e.data;if(n.vip&&n.vip.cloud){window.BDUS.vipState=n.vip.cloud.service_level}if(n.status){window.BDUS.status=n.status}else{window.BDUS.status="0"}}};var w=function(e){var n={id:"public_tuijian_suibiantingting",name:"随便听听",img:"../i/ZT9OrDsY.png"/*tpa=http://static2.qianqian.com/web/static/i/ZT9OrDsY.png*/};if(e&&e.errorCode==22e3){n={id:"private",name:"私人频道",img:"../../../../static3.qianqian.com/web/static/i/3KRB7uTd.png"/*tpa=http://static3.qianqian.com/web/static/i/3KRB7uTd.png*/}}var i=['<li class="entry-item first-item">','<a target="_blank" href="http://fm%27+ting.dm+/"/#/channel/"+n.id+'">','<div class="entry-item-btn">','<span class= "entry-icon" style="background:url('+n.img+');"></span>','<span class= "entry-text">'+n.name+"</span>","</div>","</a>","</li>"].join("");var a=$("#mbox-entry-list");var t=a.html();a.html(i+t)};function k(e){var n,i,a,t,s,l,o;a=parseInt(e.errorCode);t=e.data;i={};s=e.data.passInfo||{};l=e.data.showNum||{};if(a==22e3){i.thirdType=e.data.thirdType;ting.passport&&(ting.passport.isLogin=true);ting.userInfo=e.data;n=t.bdName?t.bdName:t.bdEmail?t.bdEmail:t.bdMobile?t.bdMobile:s.displayname;i.sUserName=n;i.sTemplate="user";i.sHomeURL="/user";i.enable_fee=!!t.enable_fee;if(t.vip){try{var r=t.vip.cloud.service_level}catch(m){}if(ting.vip){o=ting.vip.genInitFn(r,t.vip_expiry)}}else{if(ting.vip){o=ting.vip.genInitFn("not")}}if(!t.bdName&&!t.bdEmail&&!t.bdMobile&&s.incomplete_user==1){i.sSourceIcon='<img src="'+s.source_icon+'" width="16" height="16" style="vertical-align:top;margin-right:3px" />'}i.avatar=s.avatar_small;i.dynamic_num=l.dynamic_num||0;i.follow_num=l.follow_num||0;i.friend_num=l.friend_num||0;var u=e.data.ugcFlag||"0";if(u[0]>0){i.vipInfo="vip"+u[0]}else if(u[2]==1){i.vipInfo="renzheng"}else if(u[1]==1){i.vipInfo="daren"}if(!t.specialRight){i.columnHtml=""}b(i);var d=document.getElementById("menu-login");var f='<img id="anchor-user-name" src="'+i.avatar+'" /><em class="vip-info '+i.vipInfo+'"></em>';d.innerHTML=f}else{i.enable_fee=!!t.enable_fee;i.sTemplate="guest";if(ting.vip){o=ting.vip.genInitFn("anonymous")}b(null)}_(e);w(e);return c(i,o)}return k}("userbar")});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/