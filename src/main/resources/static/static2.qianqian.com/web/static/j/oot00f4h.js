require(["core/utils","tmpl/rank/redrank/loadmoreFhList","tmpl/rank/redrank/dayweektotal","tmpl/rank/redrank/fhlist","widget/toast/toast","page/rank/redrank/common"],function(i,s,a,n,t){var e=$("#fhlistTmpl"),l=["today","week","total"],o=["today"],g=["ubang","zhuanjibang","fuhaobang"],r={type:l[0],page:0,size:20,have_more:0,plugin:{week_id:0}};var h,d,u,v,b,f,c,m,p,C,w;if($(".ubang").hasClass("bang-visit")){nowbang=g[0]}if($(".zhuanjibang").hasClass("bang-visit")){nowbang=g[1]}if($(".fuhaobang").hasClass("bang-visit")){nowbang=g[2]}var q=$("#bang-wrapper");q.on("click",".icon-date",function(i){$(".qishu-content").removeClass("qishu-visit");w=q.find(".date-content").data("id");$(".qishu-content:eq("+(w-1)+")").addClass("qishu-visit");q.find(".qishu").show()}).on("click",".qishu-btn",function(i){q.find(".qishu").hide()});q.on("click",".qishu",function(i){$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")});var q=$("#bang-wrapper");var k=$(".zhuanjibang");var _=$(".fuhaobang");var y=$(".ubang");if(k.hasClass("bang-visit")){l[2]="month"}q.html(a({bill:r.type,bang:nowbang}));q.on("click",".d-bang",function(i){$(".bang").removeClass("visit");$(this).addClass("visit");q.find(".date").show();q.find(".qishu").show();q.find(".qishu").hide();o=l[0];F(b,u);if(_.hasClass("bang-visit")){ting.logger.log("illclick",{page:"富豪榜",sub:"日排行榜",pos:""})}}).on("click",".wk-bang",function(i){$(".bang").removeClass("visit");$(this).addClass("visit");q.find(".date").show();q.find(".qishu").show();q.find(".qishu").hide();o=l[1];x(b,h);if(_.hasClass("bang-visit")){ting.logger.log("illclick",{page:"富豪榜",sub:"周排行榜",pos:""})}}).on("click",".all-bang",function(i){$(".bang").removeClass("visit");$(this).addClass("visit");q.find(".date").hide();q.find(".qishu").hide();o=l[2];T();if(_.hasClass("bang-visit")){ting.logger.log("illclick",{page:"富豪榜",sub:"总排行榜",pos:""})}});q.on("click",".icon-left",function(i){if($(".d-bang").hasClass("visit")){if(u>1){u=u-1;if(o==l[0]){c=u;F(b,u)}}}if($(".wk-bang").hasClass("visit")){if(h>1){h=h-1;if(o==l[1]){m=h;x(b,h)}}}if($(".all-bang").hasClass("visit")){if(o==l[2]){T()}}});q.on("click",".icon-right",function(i){if($(".d-bang").hasClass("visit")){if(u<v){u=u+1;if(o==l[0]){f=u;c=u;F(b,u)}}}if($(".wk-bang").hasClass("visit")){if(h<d){h=h+1;if(o==l[1]){f=h;m=h;x(b,h)}}}if($(".all-bang").hasClass("visit")){if(o==l[2]){T()}}});var q=$("#bang-wrapper");q.on("click",".icon-date",function(i){q.find(".qishu").show()}).on("click",".qishu-btn",function(i){q.find(".qishu").hide();if(q.find(".d-bang").hasClass("visit")){c=w}if(q.find(".wk-bang").hasClass("visit")){m=w}});q.on("click",".qishu",function(i){if($(i.target).hasClass("qishu-wrapper")||$(i.target).hasClass("qishu")||$(i.target).hasClass("qishu-btn")){w=q.find(".date-content").data("id");$(".qishu-content:eq("+(w-1)+")").addClass("qishu-visit");$(".qishu-wrapper").removeClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")}else{$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit");$(".qishu-wrapper").removeClass("qishu-visit");w=$(".qishu-wrapper").find(".qishu-visit").data("id");if(q.find(".d-bang").hasClass("visit")){c=w;u=w;F(b,w)}if(q.find(".wk-bang").hasClass("visit")){m=w;h=w;x(b,w)}q.find(".qishu").hide()}});var z=function(s,a){i.tingApi("baidu.ting.active.getPeriod",a).done(function(i){c=i.result.today_nums||0;m=i.result.week_nums||0;p=i.result.today_nums||0;C=i.result.week_nums||0})};z();var A=function(s,a){i.tingApi("baidu.ting.active.getPeriod",a).done(function(i){p=i.result.today_nums||0;C=i.result.week_nums||0})};var S=function(s,t){A();if(_.hasClass("bang-visit")){ting.logger.log("illclick",{page:"富豪榜",sub:"日排行榜",pos:""})}b=s||0;f=t||0;var t={bill_type:l[0],offset:b,limit:r.size,period:f};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){r=$.extend(r,{type:l[0],page:b>0?++r.page:1,have_more:i.have_more||0});e.html(n({fhlist:i.result||[],type:l,loadmore:r.have_more,r:i}));q.html(a({bill:l,nums:c||0,allnums:p,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".bang").removeClass("visit");$(".d-bang").addClass("visit");$(".qishu-content:last").addClass("qishu-visit");h=m;d=C;u=c;v=p}).fail(function(i){if(i.error_code==22001){A();e.html(n({r:i}));q.html(a({bill:l[0],nums:c,allnums:p,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(w-1)+")").addClass("qishu-visit")}})};S();var x=function(s,t){A();b=s||0;f=t||0;var t={bill_type:l[1],offset:b,limit:r.size,period:f};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){r=$.extend(r,{type:l,page:b>0?++r.page:1,have_more:i.have_more||0});e.html(n({fhlist:i.result||[],type:l,loadmore:r.have_more,r:i}));q.html(a({bill:r.type,nums:m||0,allnums:C,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(m-1)+")").addClass("qishu-visit");if(o==l[0]){$(".bang").removeClass("visit");$(".d-bang").addClass("visit")}if(o==l[1]){$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}if(o==l[2]){$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}if(o==l[2]){$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}h=m;d=C;u=c;v=p}).fail(function(i){A();if(i.error_code==22001){e.html(n({r:i}));q.html(a({bill:l[1],nums:m,allnums:C,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(w-1)+")").addClass("qishu-visit");$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}})};var F=function(s,t){b=s||0;f=t||0;var t={bill_type:l[0],offset:b,limit:r.size,period:f};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){r=$.extend(r,{type:l,page:b>0?++r.page:1,have_more:i.have_more||0});e.html(n({fhlist:i.result||[],type:l,loadmore:r.have_more,r:i}));q.html(a({bill:r.type,nums:c||0,allnums:p,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(c-1)+")").addClass("qishu-visit");if(o==l[0]){$(".bang").removeClass("visit");$(".d-bang").addClass("visit")}if(o==l[1]){$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}if(o==l[2]){$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}if(o==l[2]){$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}}).fail(function(i){A();if(i.error_code==22001){e.html(n({r:i}));q.html(a({bill:l[0],nums:c,allnums:p,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(w-1)+")").addClass("qishu-visit")}})};var T=function(s,t){b=s||0;f=t||0;var t={bill_type:l[2],offset:b,limit:r.size,period:f};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){r=$.extend(r,{type:l,page:b>0?++r.page:1,have_more:i.have_more||0});e.html(n({fhlist:i.result||[],type:l,loadmore:r.have_more,r:i}));$(".qishu-content:last").addClass("qishu-visit");q.html(a({bill:r.type,nums:i.day_nums||0,bang:nowbang}));$(window).bind("scroll",windowScroll);q.find(".date").hide();q.find(".qishu").hide();$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}).fail(function(i){if(i.error_code==22001){e.html(n({r:i}));q.html(a({bill:l[2],nums:1,allnums:0,bang:nowbang}))}})};var U=0;windowScroll=function(){var i=parseFloat($(window).scrollTop());var s=parseFloat($(window).height())+i;if(parseFloat($(window).scrollTop())<=U){U=parseFloat($(window).scrollTop());return false}U=parseFloat($(window).scrollTop());if($(document).height()-150<=s){$(window).unbind("scroll");if(r.have_more){tabDataInit=false;b=b+20;B()}else{}}};$(window).bind("scroll",windowScroll);var B=function(){var a,n;if(q.find(".d-bang").hasClass("visit")){a=l[0];i:u}else if(q.find(".wk-bang").hasClass("visit")){a=l[1];i:h}else{a=l[2]}var t={bill_type:a,offset:b,limit:r.size,period:f};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){r=$.extend(r,{page:b>0?++r.page:1,have_more:i.have_more||0});var a=$(".fh-bang");a.append(s({fhlist:i.result||[],type:l,offset:b,loadmore:r.have_more}))})};bdShare({bdText:"千千音乐U榜，快来看看我的实力，不服来挑战！",bdDesc:"千千音乐U榜，快来看看我的实力，不服来挑战！",bdUrl:"http://music.taihe.com/cms/webview/celebrity_list/v1/#/fh",bdPic:"../../../../music.taihe.com/static/images/page/rank/redrank/wh_share.jpg"/*tpa=http://music.taihe.com/static/images/page/rank/redrank/wh_share.jpg*/});$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(w-1)+")").addClass("qishu-visit");$(".share-list").on("click",function(){if(y.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"月排行榜",pos:""})}}if(k.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"月排行榜",pos:""})}}if(_.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"月排行榜",pos:""})}}})});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/