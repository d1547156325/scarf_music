require(["core/utils","tmpl/rank/redrank/loadmoreFhList","tmpl/rank/redrank/dayweektotal","tmpl/rank/redrank/fhlist","widget/toast/toast","page/rank/redrank/common","domain_config"],function(i,s,a,n,t,e){var l=$("#fhlistTmpl"),o=["today","week","total"],g=["today"],r=["ubang","zhuanjibang","fuhaobang"],h={type:o[0],page:0,size:20,have_more:0,plugin:{week_id:0}};var d,u,v,b,f,c,m,p,C,w,q;if($(".ubang").hasClass("bang-visit")){nowbang=r[0]}if($(".zhuanjibang").hasClass("bang-visit")){nowbang=r[1]}if($(".fuhaobang").hasClass("bang-visit")){nowbang=r[2]}var k=$("#bang-wrapper");k.on("click",".icon-date",function(i){$(".qishu-content").removeClass("qishu-visit");q=k.find(".date-content").data("id");$(".qishu-content:eq("+(q-1)+")").addClass("qishu-visit");k.find(".qishu").show()}).on("click",".qishu-btn",function(i){k.find(".qishu").hide()});k.on("click",".qishu",function(i){$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")});var k=$("#bang-wrapper");var _=$(".zhuanjibang");var y=$(".fuhaobang");var z=$(".ubang");if(_.hasClass("bang-visit")){o[2]="month"}k.html(a({bill:h.type,bang:nowbang}));k.on("click",".d-bang",function(i){$(".bang").removeClass("visit");$(this).addClass("visit");k.find(".date").show();k.find(".qishu").show();k.find(".qishu").hide();g=o[0];T(f,v);if(y.hasClass("bang-visit")){ting.logger.log("illclick",{page:"富豪榜",sub:"日排行榜",pos:""})}}).on("click",".wk-bang",function(i){$(".bang").removeClass("visit");$(this).addClass("visit");k.find(".date").show();k.find(".qishu").show();k.find(".qishu").hide();g=o[1];F(f,d);if(y.hasClass("bang-visit")){ting.logger.log("illclick",{page:"富豪榜",sub:"周排行榜",pos:""})}}).on("click",".all-bang",function(i){$(".bang").removeClass("visit");$(this).addClass("visit");k.find(".date").hide();k.find(".qishu").hide();g=o[2];U();if(y.hasClass("bang-visit")){ting.logger.log("illclick",{page:"富豪榜",sub:"总排行榜",pos:""})}});k.on("click",".icon-left",function(i){if($(".d-bang").hasClass("visit")){if(v>1){v=v-1;if(g==o[0]){m=v;T(f,v)}}}if($(".wk-bang").hasClass("visit")){if(d>1){d=d-1;if(g==o[1]){p=d;F(f,d)}}}if($(".all-bang").hasClass("visit")){if(g==o[2]){U()}}});k.on("click",".icon-right",function(i){if($(".d-bang").hasClass("visit")){if(v<b){v=v+1;if(g==o[0]){c=v;m=v;T(f,v)}}}if($(".wk-bang").hasClass("visit")){if(d<u){d=d+1;if(g==o[1]){c=d;p=d;F(f,d)}}}if($(".all-bang").hasClass("visit")){if(g==o[2]){U()}}});var k=$("#bang-wrapper");k.on("click",".icon-date",function(i){k.find(".qishu").show()}).on("click",".qishu-btn",function(i){k.find(".qishu").hide();if(k.find(".d-bang").hasClass("visit")){m=q}if(k.find(".wk-bang").hasClass("visit")){p=q}});k.on("click",".qishu",function(i){if($(i.target).hasClass("qishu-wrapper")||$(i.target).hasClass("qishu")||$(i.target).hasClass("qishu-btn")){q=k.find(".date-content").data("id");$(".qishu-content:eq("+(q-1)+")").addClass("qishu-visit");$(".qishu-wrapper").removeClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")}else{$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit");$(".qishu-wrapper").removeClass("qishu-visit");q=$(".qishu-wrapper").find(".qishu-visit").data("id");if(k.find(".d-bang").hasClass("visit")){m=q;v=q;T(f,q)}if(k.find(".wk-bang").hasClass("visit")){p=q;d=q;F(f,q)}k.find(".qishu").hide()}});var A=function(s,a){i.tingApi("baidu.ting.active.getPeriod",a).done(function(i){m=i.result.today_nums||0;p=i.result.week_nums||0;C=i.result.today_nums||0;w=i.result.week_nums||0})};A();var S=function(s,a){i.tingApi("baidu.ting.active.getPeriod",a).done(function(i){C=i.result.today_nums||0;w=i.result.week_nums||0})};var x=function(s,t){S();if(y.hasClass("bang-visit")){ting.logger.log("illclick",{page:"富豪榜",sub:"日排行榜",pos:""})}f=s||0;c=t||0;var t={bill_type:o[0],offset:f,limit:h.size,period:c};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){h=$.extend(h,{type:o[0],page:f>0?++h.page:1,have_more:i.have_more||0});l.html(n({fhlist:i.result||[],type:o,loadmore:h.have_more,r:i}));k.html(a({bill:o,nums:m||0,allnums:C,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".bang").removeClass("visit");$(".d-bang").addClass("visit");$(".qishu-content:last").addClass("qishu-visit");d=p;u=w;v=m;b=C}).fail(function(i){if(i.error_code==22001){S();l.html(n({r:i}));k.html(a({bill:o[0],nums:m,allnums:C,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(q-1)+")").addClass("qishu-visit")}})};x();var F=function(s,t){S();f=s||0;c=t||0;var t={bill_type:o[1],offset:f,limit:h.size,period:c};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){h=$.extend(h,{type:o,page:f>0?++h.page:1,have_more:i.have_more||0});l.html(n({fhlist:i.result||[],type:o,loadmore:h.have_more,r:i}));k.html(a({bill:h.type,nums:p||0,allnums:w,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(p-1)+")").addClass("qishu-visit");if(g==o[0]){$(".bang").removeClass("visit");$(".d-bang").addClass("visit")}if(g==o[1]){$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}if(g==o[2]){$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}if(g==o[2]){$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}d=p;u=w;v=m;b=C}).fail(function(i){S();if(i.error_code==22001){l.html(n({r:i}));k.html(a({bill:o[1],nums:p,allnums:w,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(q-1)+")").addClass("qishu-visit");$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}})};var T=function(s,t){f=s||0;c=t||0;var t={bill_type:o[0],offset:f,limit:h.size,period:c};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){h=$.extend(h,{type:o,page:f>0?++h.page:1,have_more:i.have_more||0});l.html(n({fhlist:i.result||[],type:o,loadmore:h.have_more,r:i}));k.html(a({bill:h.type,nums:m||0,allnums:C,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(m-1)+")").addClass("qishu-visit");if(g==o[0]){$(".bang").removeClass("visit");$(".d-bang").addClass("visit")}if(g==o[1]){$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}if(g==o[2]){$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}if(g==o[2]){$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}}).fail(function(i){S();if(i.error_code==22001){l.html(n({r:i}));k.html(a({bill:o[0],nums:m,allnums:C,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(q-1)+")").addClass("qishu-visit")}})};var U=function(s,t){f=s||0;c=t||0;var t={bill_type:o[2],offset:f,limit:h.size,period:c};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){h=$.extend(h,{type:o,page:f>0?++h.page:1,have_more:i.have_more||0});l.html(n({fhlist:i.result||[],type:o,loadmore:h.have_more,r:i}));$(".qishu-content:last").addClass("qishu-visit");k.html(a({bill:h.type,nums:i.day_nums||0,bang:nowbang}));$(window).bind("scroll",windowScroll);k.find(".date").hide();k.find(".qishu").hide();$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}).fail(function(i){if(i.error_code==22001){l.html(n({r:i}));k.html(a({bill:o[2],nums:1,allnums:0,bang:nowbang}))}})};var B=0;windowScroll=function(){var i=parseFloat($(window).scrollTop());var s=parseFloat($(window).height())+i;if(parseFloat($(window).scrollTop())<=B){B=parseFloat($(window).scrollTop());return false}B=parseFloat($(window).scrollTop());if($(document).height()-150<=s){$(window).unbind("scroll");if(h.have_more){tabDataInit=false;f=f+20;W()}else{}}};$(window).bind("scroll",windowScroll);var W=function(){var a,n;if(k.find(".d-bang").hasClass("visit")){a=o[0];i:v}else if(k.find(".wk-bang").hasClass("visit")){a=o[1];i:d}else{a=o[2]}var t={bill_type:a,offset:f,limit:h.size,period:c};i.tingApi("baidu.ting.active.getWealthBill",t).done(function(i){h=$.extend(h,{page:f>0?++h.page:1,have_more:i.have_more||0});var a=$(".fh-bang");a.append(s({fhlist:i.result||[],type:o,offset:f,loadmore:h.have_more}))})};bdShare({bdText:"千千音乐U榜，快来看看我的实力，不服来挑战！",bdDesc:"千千音乐U榜，快来看看我的实力，不服来挑战！",bdUrl:e.host+"/cms/webview/celebrity_list/v1/#/fh",bdPic:e.host+"//static4.qianqian.com/web/static/images/page/rank/redrank/wh_share.jpg"});$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(q-1)+")").addClass("qishu-visit");$(".share-list").on("click",function(){if(z.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"月排行榜",pos:""})}}if(_.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"月排行榜",pos:""})}}if(y.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"月排行榜",pos:""})}}})});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/