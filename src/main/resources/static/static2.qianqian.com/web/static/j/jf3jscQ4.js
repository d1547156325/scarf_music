require(["core/utils","tmpl/rank/redrank/loadmoreZjList","tmpl/rank/redrank/zjfanschange","tmpl/rank/redrank/zhuanjifanschangeleft","tmpl/rank/redrank/zjfansbangdetail","tmpl/rank/redrank/zjfansbang","tmpl/rank/redrank/dayweektotal","tmpl/rank/redrank/zjlist","widget/toast/toast","page/rank/redrank/common","domain_config"],function(i,s,a,n,e,t,l,o,r,g){var d=$(".zjlistTmpl");var v=$("#fensibang");var h=0;d.on("click",".icon-img",function(i){S=$(this).data("id");p.albumid=S;N(h,S);v.find(".fensibang").show()});v.click(".fensibang-hid",function(i){if($(i.target).hasClass("fensibang-hid")){v.find(".fensibang").hide();Q=0}});var f=$("#zjlistTmpl"),u=$("#bang-wrapper"),b=["today","week","month"],c=["today"],m=["ubang","zhuanjibang","fuhaobang"],p={type:b[0],page:0,size:20,have_more:0,albumid:S,plugin:{week_id:0}};var C,w,q,k,_,y,z,A,j,x,F,S,T,B,U,P;if($(".ubang").hasClass("bang-visit")){nowbang=m[0]}if($(".zhuanjibang").hasClass("bang-visit")){nowbang=m[1]}if($(".fuhaobang").hasClass("bang-visit")){nowbang=m[2]}var u=$("#bang-wrapper");u.on("click",".icon-date",function(i){$(".qishu-content").removeClass("qishu-visit");P=u.find(".date-content").data("id");$(".qishu-content:eq("+(P-1)+")").addClass("qishu-visit");u.find(".qishu").show()}).on("click",".qishu-btn",function(i){u.find(".qishu").hide()});u.on("click",".qishu",function(i){$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")});var u=$("#bang-wrapper");var D=$(".zhuanjibang");var I=$(".fuhaobang");var L=$(".ubang");if(D.hasClass("bang-visit")){b[2]="month"}u.html(l({bill:p.type,bang:nowbang}));u.on("click",".d-bang",function(i){var s=0;$(".bang").removeClass("visit");$(this).addClass("visit");u.find(".date").show();c=b[0];K(s,q);if(D.hasClass("bang-visit")){ting.logger.log("illclick",{page:"专辑榜",sub:"日排行榜",pos:""})}}).on("click",".wk-bang",function(i){var s=0;$(".bang").removeClass("visit");$(this).addClass("visit");u.find(".date").show();c=b[1];J(s,C);if(D.hasClass("bang-visit")){ting.logger.log("illclick",{page:"专辑榜",sub:"周排行榜",pos:""})}}).on("click",".m-bang",function(i){var s=0;$(".bang").removeClass("visit");$(this).addClass("visit");c=b[2];M(s,_);if(D.hasClass("bang-visit")){ting.logger.log("illclick",{page:"专辑榜",sub:"月排行榜",pos:""})}});u.on("click",".icon-left",function(i){if($(".d-bang").hasClass("visit")){if(q>1){q=q-1;if(c==b[0]){j=q;K(z,q)}}}if($(".wk-bang").hasClass("visit")){if(C>1){C=C-1;if(c==b[1]){x=C;J(z,C)}}}if($(".m-bang").hasClass("visit")){if(_>1){_=_-1;if(c==b[2]){F=_;M(z,_)}}}});u.on("click",".icon-right",function(i){if($(".d-bang").hasClass("visit")){if(q<k){q=q+1;if(c==b[0]){A=q;j=q;K(z,q)}}}if($(".wk-bang").hasClass("visit")){if(C<w){C=C+1;if(c==b[1]){A=C;x=C;J(z,C)}}}if($(".m-bang").hasClass("visit")){if(_<y){_=_+1;if(c==b[2]){F=_;M(z,_)}}}});var u=$("#bang-wrapper");u.on("click",".icon-date",function(i){u.find(".qishu").show()}).on("click",".qishu-btn",function(i){u.find(".qishu").hide();if(u.find(".d-bang").hasClass("visit")){j=P}if(u.find(".wk-bang").hasClass("visit")){x=P}if(u.find(".m-bang").hasClass("visit")){F=P}});u.on("click",".qishu",function(i){if($(i.target).hasClass("qishu-wrapper")||$(i.target).hasClass("qishu")||$(i.target).hasClass("qishu-btn")){P=u.find(".date-content").data("id");$(".qishu-content:eq("+(P-1)+")").addClass("qishu-visit");$(".qishu-wrapper").removeClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")}else{$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit");$(".qishu-wrapper").removeClass("qishu-visit");P=$(".qishu-wrapper").find(".qishu-visit").data("id");if(u.find(".d-bang").hasClass("visit")){j=P;q=P;K(z,P)}if(u.find(".wk-bang").hasClass("visit")){x=P;C=P;J(z,P)}if(u.find(".m-bang").hasClass("visit")){F=P;_=P;M(z,P)}u.find(".qishu").hide()}});var Z=function(s,a){i.tingApi("baidu.ting.active.getPeriod",a).done(function(i){j=i.result.today_nums||0;x=i.result.week_nums||0;F=i.result.total_month||0;T=i.result.today_nums||0;B=i.result.week_nums||0;U=i.result.total_month||0})};Z();var E=function(s,a){i.tingApi("baidu.ting.active.getPeriod",a).done(function(i){T=i.result.today_nums||0;B=i.result.week_nums||0;U=i.result.total_month||0})};var G;var H=function(s,a){E();if(D.hasClass("bang-visit")){ting.logger.log("illclick",{page:"专辑榜",sub:"日排行榜",pos:""})}z=s||0;A=a||0;var a={bill_type:b[0],offset:z,limit:p.size,period:A};i.tingApi("baidu.ting.active.getAlbumBill",a).done(function(i){p=$.extend(p,{type:b[0],page:z>0?++p.page:1,have_more:i.have_more||0});f.html(o({zjlist:i.result||[],type:b,loadmore:p.have_more,r:i}));u.html(l({bill:b,nums:j||0,allnums:T,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".bang").removeClass("visit");$(".d-bang").addClass("visit");$(".qishu-content:last").addClass("qishu-visit");C=x;w=B;q=j;k=T;_=F;y=U;G=i.result||[]}).fail(function(i){if(i.error_code==22001){E();f.html(o({r:i}));u.html(l({bill:b[0],nums:j,allnums:T,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(P-1)+")").addClass("qishu-visit")}})};H();var J=function(s,a){E();z=s||0;A=a||0;var a={bill_type:b[1],offset:z,limit:p.size,period:A};i.tingApi("baidu.ting.active.getAlbumBill",a).done(function(i){p=$.extend(p,{type:b,page:z>0?++p.page:1,have_more:i.have_more||0});f.html(o({zjlist:i.result||[],type:b,loadmore:p.have_more,r:i}));u.html(l({bill:p.type,nums:x||0,allnums:B,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(x-1)+")").addClass("qishu-visit");if(c==b[0]){$(".bang").removeClass("visit");$(".d-bang").addClass("visit")}if(c==b[1]){$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}if(c==b[2]){$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}if(c==b[2]){$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}C=x;w=B;q=j;k=T;_=F;y=U}).fail(function(i){E();if(i.error_code==22001){f.html(o({r:i}));u.html(l({bill:b[1],nums:x,allnums:B,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(P-1)+")").addClass("qishu-visit");$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}})};var K=function(s,a){E();z=s||0;A=a||0;var a={bill_type:b[0],offset:z,limit:p.size,period:A};i.tingApi("baidu.ting.active.getAlbumBill",a).done(function(i){p=$.extend(p,{type:b,page:z>0?++p.page:1,have_more:i.have_more||0});f.html(o({zjlist:i.result||[],type:b,loadmore:p.have_more,r:i}));u.html(l({bill:p.type,nums:j||0,allnums:T,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(j-1)+")").addClass("qishu-visit");if(c==b[0]){$(".bang").removeClass("visit");$(".d-bang").addClass("visit")}if(c==b[1]){$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}if(c==b[2]){$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}if(c==b[2]){$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}}).fail(function(i){E();if(i.error_code==22001){f.html(o({r:i}));u.html(l({bill:b[0],nums:j,allnums:T,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(P-1)+")").addClass("qishu-visit")}})};var M=function(s,a){E();z=s||0;A=a||0;var a={bill_type:b[2],offset:z,limit:p.size,period:A};i.tingApi("baidu.ting.active.getAlbumBill",a).done(function(i){p=$.extend(p,{type:b,page:z>0?++p.page:1,have_more:i.have_more||0});f.html(o({zjlist:i.result||[],type:b,loadmore:p.have_more,r:i}));u.html(l({bill:p.type,nums:F||0,allnums:U,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(F-1)+")").addClass("qishu-visit");$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}).fail(function(i){E();if(i.error_code==22001){f.html(o({r:i}));u.html(l({bill:b[0],nums:j,allnums:U,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(P-1)+")").addClass("qishu-visit")}})};var N=function(s,a){s=s||0;var n=$(".date-content").data("id")||0;var e,l;if(u.find(".d-bang").hasClass("visit")){e=b[0];i:q}else if(u.find(".wk-bang").hasClass("visit")){e=b[1];i:C}else{e=b[2];i:_}var o={album_id:a,offset:s,period:n,bill_type:e,limit:p.size};i.tingApi("baidu.ting.active.getAlbumFans",o).done(function(i){p=$.extend(p,{type:b[0],page:s>0?++p.page:1,have_more:i.have_more||0});v.html(t({fens:i.result||[]}));O()})};var O=function(s){var a=$("#fensi-details");s=s||0;var n=$(".date-content").data("id")||0;var t,l;if(u.find(".d-bang").hasClass("visit")){t=b[0];i:q}else if(u.find(".wk-bang").hasClass("visit")){t=b[1];i:C}else{t=b[2];i:_}var o={album_id:S,offset:s,period:n,bill_type:t,limit:12};i.tingApi("baidu.ting.active.getAlbumFans",o).done(function(i){p=$.extend(p,{type:b[0],page:s>0?++p.page:1,have_more:i.have_more||0});a.html(e({fens:i.result||[]}))})};var Q=0;var R=function(s){var n=$("#fensi-details");s=s||0;var e=$(".date-content").data("id")||0;var t,l;if(u.find(".d-bang").hasClass("visit")){t=b[0];i:q}else if(u.find(".wk-bang").hasClass("visit")){t=b[1];i:C}else{t=b[2];i:_}var o={album_id:S,offset:s,period:e,bill_type:t,limit:9};i.tingApi("baidu.ting.active.getAlbumFans",o).done(function(i){p=$.extend(p,{type:b[0],page:s>0?++p.page:1,have_more:i.have_more||0});n.html(a({fens:i.result||[],offset:Q}))})};var V=function(s){var a=$("#fensi-details");s=s||0;var e=$(".date-content").data("id")||0;var t,l;if(u.find(".d-bang").hasClass("visit")){t=b[0];i:q}else if(u.find(".wk-bang").hasClass("visit")){t=b[1];i:C}else{t=b[2];i:_}var o={album_id:S,offset:s,period:e,bill_type:t,limit:12};i.tingApi("baidu.ting.active.getAlbumFans",o).done(function(i){p=$.extend(p,{type:b[0],page:s>0?++p.page:1,have_more:i.have_more||0});a.html(n({fens:i.result||[],offset:Q}))})};$(".fensi-left").live("click",function(i){if(Q>0){Q=Q-9;R(Q)}if(Q==0){V(Q)}});$(".fensi-right").live("click",function(i){if(p.have_more!==0){Q=Q+9;R(Q)}});var W=0;windowScroll=function(){var i=parseFloat($(window).scrollTop());var s=parseFloat($(window).height())+i;if(parseFloat($(window).scrollTop())<=W){W=parseFloat($(window).scrollTop());return false}W=parseFloat($(window).scrollTop());if($(document).height()-150<=s){$(window).unbind("scroll");if(p.have_more){tabDataInit=false;z=z+20;X()}else{}}};$(window).bind("scroll",windowScroll);var X=function(){var a,n;if(u.find(".d-bang").hasClass("visit")){a=b[0];i:q}else if(u.find(".wk-bang").hasClass("visit")){a=b[1];i:C}else{a=b[2];i:_}var e=$(".date");var t=e.find(".date-content").data("id");var l={bill_type:a,offset:z,limit:p.size,period:t};i.tingApi("baidu.ting.active.getAlbumBill",l).done(function(i){p=$.extend(p,{page:z>0?++p.page:1,have_more:i.have_more||0});var a=$(".zj-bang");a.append(s({zjlist:i.result||[],type:b,offset:z,loadmore:p.have_more}))})};bdShare({bdText:"千千音乐u榜，寻找属于你的专辑！",bdDesc:"千千音乐u榜，寻找属于你的专辑！",bdUrl:g.host+"/cms/webview/celebrity_list/v1/#/zj",bdPic:g.host+"//static4.qianqian.com/web/static/images/page/rank/redrank/wh_share.jpg"});$(".share-list").on("click",function(){if(L.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"月排行榜",pos:""})}}if(D.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"月排行榜",pos:""})}}if(I.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"月排行榜",pos:""})}}})});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/