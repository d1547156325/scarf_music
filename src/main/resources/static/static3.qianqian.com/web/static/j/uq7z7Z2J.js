define(["core/utils","tmpl/rank/urank/shouHuTuanDetailTmpl","widget/toast/toast","page/rank/urank/common","page/rank/urank/index"],function(e,t,i,o,n){n.initHeader();var a=$(".ubang-detail"),l=false,r=a.data("artistid")||0,s=$("#ubang_artist_shouhu"),d=$(".last-line"),f=$(".loading-ubang"),c=true,u=0,h,g,p={offset:0,limit:10,have_more:1};getProBill=function(){e.tingApi("baidu.ting.active.getProBill",{offset:p.offset,limit:p.limit,artist_id:r}).done(function(e){if(e.error_code==22e3){var i=t({item:e.result,fsLevel:n.fsLevel});if(c){s.append(i)}else{s.append(i)}if(e.have_more){p.offset=p.offset+10;d.hide()}else{d.show()}p.have_more=e.have_more;$(window).bind("scroll",windowScroll)}f.hide();$(".no-data-text").remove()}).fail(function(e){f.hide();d.show()})},windowScroll=function(){var e=parseFloat($(window).scrollTop());totalheight=parseFloat($(window).height())+e;if(parseFloat($(window).scrollTop())<=u){u=parseFloat($(window).scrollTop());return false}u=parseFloat($(window).scrollTop());if(l==true){return false}if($(document).height()-50<=totalheight){$(window).unbind("scroll");if(p.have_more){c=false;getProBill()}}},fuserInfo=function(){e.tingApi("baidu.ting.active.getRedUserInfo",{artist_id:r}).done(function(e){if(e.error_code==22e3){h=e.result;bdShare({bdText:"千千音乐U榜-"+h.name,bdDesc:"快来给参加千千音乐U榜打榜中的"+h.name+"打榜助威吧!",bdUrl:"http://music.taihe.com/cms/webview/celebrity_list/v1/#/dbinfo-page/"+r,bdPic:h.pic_list[0]})}}).fail(function(e){a.html('<p class="reload-ubang">看你萌的，服务器都开小差了，3秒后重新来过吧!');setTimeout(function(){location.reload()},3e4)})},fuserInfo();getyClientHeight=function(){var e=$(".music-foot").clone().appendTo("detail-WHB")[0];var t=document.documentElement.clientHeight-$(".music-foot").height()-$(".top-header-wrapper").height()-$(".urank-tab").height()+30;$(".detail-WHB").css({"min-height":t+"px"});node=e;e=null;$(".music-foot").show()};getProBill();$(".loading-gif, .loading-bg").hide();getyClientHeight();m();function m(){$(".share-list").live("click",function(){ting.logger.log("share",{page:"艺人页",sub:"",pos:"",contenttype:"artist",content:r,artistname:h.name})})}});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/