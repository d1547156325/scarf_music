var ting=ting||{};(function(n){var e={},t={},i=window.location.href.replace(/(http:\/\/[^\/\\]+)([\/\\].*)/g,"$1");var a=function(){var n={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};var e=navigator.userAgent,t=/(msie) ([\w.]+)/.exec(e.toLowerCase());if(t&&t[1]&&t[2]&&(!document.documentMode||document.documentMode<8)){n["for"]="htmlFor";n["class"]="className"}else{n.htmlFor="for";n.className="class"}return n}();var o=function(n){if("string"==typeof n||n instanceof String){return document.getElementById(n)}else if(n&&n.nodeName&&(n.nodeType==1||n.nodeType==9)){return n}return null};var s=function(n){return String(n).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")};var r=function(n,e,t){n=o(n);if("style"==e){n.style.cssText=t}else{e=a[e]||e;n.setAttribute(e,t)}return n};var c=function(n,e){var t;n=o(n);for(t in e){if(e.hasOwnProperty(t)){r(n,t,e[t])}}return n};var l=function(n,e){n=o(n);var t=e.split(/\s+/),i=n.className,a=" "+i+" ",s=0,r=t.length;for(;s<r;s++){if(a.indexOf(" "+t[s]+" ")<0){i+=(i?" ":"")+t[s]}}n.className=i;return n};var u=function(n,e){var t=document.createElement(n),i=e||{};return c(t,i)};var p=function(n,e,t){var i=[],a=function(n){var e=new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return String(n).replace(e,"")},r,c,l,u;if(!(n=a(n))){return i}if("undefined"==typeof e){e=document}else{e=o(e);if(!e){return i}}if(t){t=a(t).toUpperCase()}if(e.getElementsByClassName){l=e.getElementsByClassName(n);r=l.length;for(c=0;c<r;c++){u=l[c];if(t&&u.tagName!=t){continue}i[i.length]=u}}else{n=new RegExp("(^|\\s)"+s(n)+"(\\s|$)");l=t?e.getElementsByTagName(t):e.all||e.getElementsByTagName("*");r=l.length;for(c=0;c<r;c++){u=l[c];if(n.test(u.className)){i[i.length]=u}}}return i};var f=function(n,e,t){var i=p(n,e,t);if(i&&i[0]){return i[0]}return null};var d=function(n){return n+"px"};var h={ele:null,mask:null,boxSize:null,init:function(n,e){this.boxSize=e||{width:500,height:300};this.ele=this.getElement(n);this.mask=this.mask||this.createMask()},getElement:function(n){var e=this.boxSize;return{dom:n,show:function(){var n=h.position(e.width,e.height),t=this.dom;t.style.width=d(e.width);t.style.top=d(n.top);t.style.left=d(n.left);t.style.display="block"},hide:function(){this.dom.style.display="none"}}},createMask:function(){var n=document,e=n.body,t=n.documentElement,i=n.compatMode==="BackCompat"?e:n.documentElement,a=n.createElement("div");e.insertBefore(a,e.childNodes[0]);a.style.display="none";a.className="popup-mask";return{layer:a,show:function(){var n=Math.max(t.scrollHeight,e.scrollHeight,i.clientHeight),a=Math.max(t.scrollWidth,e.scrollWidth,i.clientWidth),o=this.layer;o.style.width=d(a);o.style.height=d(n);h.animateShow(o)},hide:function(){this.layer.style.display="none"}}},show:function(){if(this.ele){this.ele.show()}if(this.mask){this.mask.show()}},hide:function(){if(this.ele){this.ele.hide()}if(this.mask){this.mask.hide()}},position:function(n,e){var t=document,i=t.compatMode==="BackCompat"?t.body:t.documentElement,a=(i.clientWidth-n)/2,o=(i.clientHeight-e)/2;a+=window.pageXOffset||t.documentElement.scrollLeft||t.body.scrollLeft;o+=window.pageYOffset||t.documentElement.scrollTop||t.body.scrollTop;o=o<0?5:o;return{top:o,left:a}},animateShow:function I(n){var e=n.className,t=0,i;n.className=e+" account-ts0";n.style.display="block";i=setInterval(function(){t+=1;if(t===4){clearInterval(i)}n.className=e+" account-ts"+t},30)}};var g=function(n){g.prototype.init.call(this,n)};var m=g.prototype;m.init=function(n){var e;if(!n){return}for(e in n){if(n.hasOwnProperty(e)){this[e]=n[e]}}};m.render=function(){var n;if(this.base&&this.base.render){n=this.base.render()}return this.myRender(n)};m.getBoxSize=function(){if(this.boxSize){return this.boxSize}else if(this.base&&this.base.getBoxSize){return this.base.getBoxSize()}return null};m.all=function(n){var e=[],t=this;while(t){if(t[n]){e.push(t[n])}t=t.base}return e};var v=function(n){var e=this;m.init.call(this,n);this.myRender=function(){var n={onFillInUsernameSuccess:function(){var n=ting.passport.lastCallback;n.onClose();if(n.onSuccess){n.onSuccess(ting.userInfo)}},onGetErr:function(n){var e=n+"";switch(e){case"160100":case"160111":case"160110":break}},onReady:function(){var n=ting.passport.lastCallback,e;if(e=o("pass_fillinusername_submit_input")){e.value="确定"}if(n.onReady){n.onReady()}}},e=ting.passport.lastOptions,t=e&&e.container?e.container:"fillinusername_holder"}};v.prototype=new g;var y=function(n){var e=this;m.init.call(this,n);this.myRender=function(n){var e={onRealizeUserSuccess:function(){var n=ting.passport.lastCallback;n.onClose();if(n.onSuccess){n.onSuccess(ting.userInfo)}},onGetErr:function(n){var e=n+"";switch(e){case"160100":case"160111":case"160110":break}},onReady:function(){var n=ting.passport.lastCallback,e;if(e=o("pass_fillinusername_submit_input")){e.value="确定"}if(n.onReady){n.onReady()}}},t=ting.passport.lastOptions,i=t&&t.container?t.container:"fillinusername_holder"}};y.prototype=new g;var b=function(n){m.init.call(this,n);this.myRender=function(n){return n}};b.prototype=new g;var w=function(n){m.init.call(this,n);this.myRender=function(n){var e=f("account-popup-holder")||u("div",{className:"account-popup-holder"}),t;l(e,"account-popup-holder-no-user");e.innerHTML=['<div class="account-ptitle">','    <span class="account-ptitle-text"></span>','    <a class="account-pclose" href="#" title="关闭窗口"></a>',"</div>",'<div class="account-pbody"></div>'].join("");t=f("account-pclose",e);t.onclick=function(){var n=ting.passport.lastCallback;n.onClose();if(n.onAbstractCancel){n.onAbstractCancel()}return false};return e}};w.prototype=new g;var C=function(n){m.init.call(this,n);this.boxSize={width:380,height:340};this.myRender=function(n){var e=n,t=f("account-pbody",e),i=f("account-ptitle-text",e);l(t,"account-pbody-no-u");i.innerHTML="未绑定真实信息";t.innerHTML=['<div class="action-holder no-u-holder">','   <div class="action-title-holder no-u-title-holder">','        <span class="account-t2 no-u-t2"></span>','        <span class="action-title-tip no-u-title-tip">您还未绑定邮箱或手机号，为了保障您的账户安全，建议您立即进行<a class="account-link" href="http://passport.baidu.com/v2/accountsecurity?u='+encodeURIComponent("http://music.qianqian.com")+'" target="_blank" title="安全设置">安全设置</a></span>',"    </div>","</div>"].join("");ting.passport.lastCallback.onAbstractCancel=function(){var n=ting.passport.lastCallback;if(n.onRealizeUserCancel){n.onRealizeUserCancel()}if(n.onCancel){n.onCancel()}};var a=f("account-link",e);a.onclick=function(){var n=ting.passport.lastCallback;n.onClose();if(n.onAbstractCancel){n.onAbstractCancel()}};return e}};C.prototype=new g;var k=function(n){var e=this;m.init.call(this,n);this.myRender=function(n){var e={onRealizeUserSuccess:function(){var n=ting.passport.lastCallback;n.onClose();if(n.onSuccess){n.onSuccess(ting.userInfo)}},onGetErr:function(n){var e=n+"";switch(e){case"160100":case"160111":case"160110":break}},onReady:function(){var n=ting.passport.lastCallback,e;if(e=o("pass_fillinusername_submit_input")){e.value="确定"}if(n.onReady){n.onReady()}}},t=ting.passport.lastOptions,i=t&&t.container?t.container:"fillinusername_holder"}};k.prototype=new g;var S=function(n){m.init.call(this,n);this.boxSize={width:380,height:340};this.myRender=function(n){var e=n,t=f("account-pbody",e),i=f("account-ptitle-text",e);l(t,"account-pbody-no-u");i.innerHTML="补全个人信息";t.innerHTML=['<div class="action-holder no-u-holder">','   <div class="action-title-holder no-u-title-holder">','        <span class="account-t2 no-u-t2"></span>','        <span class="action-title-tip no-u-title-tip">您正在使用第三方账号登陆，为了更好的使用VIP付费服务，请先到<a class="account-link" href="http://passport.baidu.com/v2/?binding&showtype=email&u='+encodeURIComponent("http://music.qianqian.com")+'" target="_blank" title="用户中心">用户中心</a>补全个人信息吧。</span>',"    </div>","</div>"].join("");ting.passport.lastCallback.onAbstractCancel=function(){var n=ting.passport.lastCallback;if(n.onRealizeUserCancel){n.onRealizeUserCancel()}if(n.onCancel){n.onCancel()}};var a=f("account-link",e);a.onclick=function(){var n=ting.passport.lastCallback;n.onClose();if(n.onAbstractCancel){n.onAbstractCancel()}};return e}};S.prototype=new g;var R=function(n){m.init.call(this,n);this.boxSize={width:380,height:340};this.myRender=function(n){var e=n,t=f("account-pbody",e),i=f("account-ptitle-text",e);l(t,"account-pbody-no-u");i.innerHTML="补填用户名";t.innerHTML=['<div class="action-holder no-u-holder">','   <div class="action-title-holder no-u-title-holder">','        <span class="account-t2 no-u-t2"></span>','        <span class="action-title-tip no-u-title-tip">欢迎来到百度，您还没有用户名哦，快<a class="account-link" href="http://passport.baidu.com/v2/?ucenteradduname&u='+encodeURIComponent("http://music.qianqian.com")+'" target="_blank" title="补填用户名">点击这里</a>起一个吧！</span>',"    </div>","</div>"].join("");ting.passport.lastCallback.onAbstractCancel=function(){var n=ting.passport.lastCallback;if(n.onFillinUserNameCancel){n.onFillinUserNameCancel()}if(n.onCancel){n.onCancel()}};var a=f("account-link",e);a.onclick=function(){var n=ting.passport.lastCallback;n.onClose();if(n.onAbstractCancel){n.onAbstractCancel()}};return e}};R.prototype=new g;var x={fillinUserName:{normal:[R]},realizeUser:{normal:[S]},bindRealInfo:{normal:[C]}};var N=function(n,e){var t=n.pop();while(t){t.apply(null,e);t=n.pop()}};t.escapeReg=function(n){return String(n).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")};t.isString=function(n){return typeof n==="object"&&n&&n.constructor===String||typeof n==="string"};t.parseQuery=function(n,e){if(e){var i=new RegExp("(^|&|\\?|#)"+t.escapeReg(e)+"=([^&]*)(&|$)",""),a=n.match(i);if(a){return a[2]}}else{if(n){n=n.substr(n.indexOf("?")+1,n.length);var o=n.split("&");var s={},r=[],c,l,u,p;for(p=0;p<o.length;p++){c=o[p].split("=");l=c[0];u=c[1];if(l===""){continue}if(typeof s[l]==="undefined"){s[l]=u}else{if(t.isString(s[l])){continue}else{s[l].push(u)}}}return s}}return null};t.sioGet=function(n,e){var i,a,o,s,r;if(!n||!t.isString(n)){return null}i=t.parseQuery(n,"callback");a=document.createElement("SCRIPT");if(!i){o=false;a.onreadystatechange=a.onload=function(){if(o){return false}if(typeof a.readyState==="undefined"||a.readyState==="loaded"||a.readyState==="complete"){o=true;try{e()}finally{if(a&&a.parentNode){a.parentNode.removeChild(a)}a.onreadystatechange=null;a.onload=null;a=null}}}}else{s="CB"+Math.floor(Math.random()*2147483648).toString(36);n=n.replace(/(&|\?)callback=([^&]*)/,"$1callback="+s);window[s]=function(){try{var n=e||window[i];n.apply(null,arguments)}finally{if(a&&a.parentNode){a.parentNode.removeChild(a)}a=null;window[s]=null}}}a.src=n;a.type="text/javascript";a.charset="gb2312";r=document.getElementsByTagName("HEAD")[0];r.insertBefore(a,r.firstChild)};t.refreshUserBar=function(){if(ting.refreshUserBar){ting.refreshUserBar()}};t.setLoginedCookie=function(){try{if(window.jQuery){jQuery.cookie("u_lo","1",{path:"/",expires:30});jQuery.cookie("u_id",ting.userInfo.userId,{path:"/",expires:30});jQuery.cookie("u_t",ting.userInfo.userType,{path:"/",expires:30})}}catch(n){}};e.render=function(n,e,t,i,a){var o={fillinUserName:v,realizeUser:y,bindRealInfo:k},s=o[n],r=new s({base:a||new b});r.render()};e.popupLogin=function(n,e,t){var a=this,o;o=function(n){var e=ting.passport.lastCallback;ting.userInfo=n;if(e.onSuccess){e.onSuccess(n)}};if(!this.loginInstance){$.getScript("//passport.baidu.com/passApi/js/uni_login_wrapper.js?cdnversion="+(new Date).getTime(),function(){a.loginInstance=passport.pop.init({tangram:true,cache:true,apiOpt:{product:"music",staticPage:i+"/static/html/pass_jump_v3.html",memberPass:true,u:window.location.href},forgetLink:"https://passport.baidu.com/?getpass_index",registerLink:"https://passport.baidu.com/v2/?reg&regType=1",authsite:["tsina","qzone","renren","weixin"],img:"../../../../static2.qianqian.com/web/static/i/7mqo8tiZ.jpg"/*tpa=http://static2.qianqian.com/web/static/i/7mqo8tiZ.jpg*/,onLoginSuccess:function(n){n.returnValue=false;$(document).trigger("logined");if(t.pos==="userbar"){$(document).trigger("userbarlogined")}a.loginInstance.hide();o();a.loginInstance.destroy()},onShow:function(){},onHide:function(){var n=ting.passport.lastCallback;if(n&&n.onCancel){n.onCancel.call()}}});a.loginInstance.show()})}else{a.loginInstance.show()}};e.popup=function(n,e,t){e=e||{};e.onClose=function(){h.hide()};ting.passport.lastCallback=e;ting.passport.lastOptions=t;if(n=="login"){this.popupLogin(n,e,t);return}var i=this,a=new w,o=x[n],s=o.normal,r=ting.passport.lastDom||null,c,l,u,p,f,d;for(p=0;p<s.length;p++){a=new s[p]({base:a})}if(r){document.body.removeChild(r)}c=a.render();u=a.getBoxSize();stack=a.all("onReady");l=function(n){m.init.call(this,n);this.myRender=function(){return c};this.onReady=function(n){var e=[],t,i;for(t=0,i=stack.length;t<i;t+=1){e[t]=stack[t]}N(e,arguments)}};l.prototype=new g;d=function(){document.body.insertBefore(c,document.body.childNodes[0]);ting.passport.lastDom=c;h.init(c,u);h.show();ting.passport.render(n,null,e,t,new l)};d()};e.checkLogin=function(n,e){var i=ting.userInfo,a,o,s;if(arguments.length<=2){o=n;s=e||{}}else{o={onSuccess:arguments[0],onFailure:arguments[1],onCancel:arguments[2],onPassportSuccess:arguments[3]};s=arguments[4]||{}}a=o.onSuccess;o.onSuccess=function(n){n=n||{};n.login=true;n.active=true;ting.userInfo=n;t.refreshUserBar();t.setLoginedCookie();if(!!s&&s.needBdName&&(!ting.userInfo||!ting.userInfo.bdName)){o.onSuccess=a;ting.passport.checkBdName(o,s)}else{if(a){a(n)}}};if(i===null||i===undefined){$.ajax({url:"/data/user/info",dataType:"jsonp",success:function(n){if(n.errorCode==22452){ting.passport.popup("login",o,s)}else{ting.userInfo=n.data;if(o.onSuccess){o.onSuccess(ting.userInfo)}}}})}else{if(o.onSuccess){o.onSuccess(i)}}};e.login=function(){e.checkLogin(function(){window.location.reload()},function(){},function(){},function(){})};e.checkBdName=function(n,e){$.ajax({url:"/data/user/info",dataType:"jsonp",success:function(i){var a=i.data,o=n,s=e,r;r=o.onSuccess;o.onSuccess=function(n){if(n){n=n||{};ting.userInfo=n}t.refreshUserBar();if(r){r(n)}};if(a&&a.bdName&&a.bdName.length>0){o.onSuccess(a)}else{ting.passport.popup("fillinUserName",o,s)}}})};n.passport=e})(ting);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/