(function(e,i){e.fn.collectPlaylist=function(i){var t=this,l=e(t).data("playlist"),i=i||{},a=l?l.ids.split(",").length:0;e(t).tip();if(e(t).data("collected")){e(t).tip("tipup",{msg:"已收藏为歌单",iconClass:"tip-success"});return}function s(t,s){var o={page:ting.logger.getPage(),listid:l.listid,pos:"collect_list",songcount:a,listname:l.title};o=e.extend(o,s,i.log||{});if(ting&&ting.logger){ting.logger.log(t,o)}}s("click");var o={moduleName:l.moduleName,ids:l.ids||"",mediaType:2,albumId:l.listid||"",_aiPresaleFlag:l._aiPresaleFlag||"",resourceTypeExt:l.resourceTypeExt||"",albumPic:l.albumPic||"",albumTitle:l.albumTitle||"",albumPublishTime:l.albumPublishTime||""};var r={page:ting.logger.getPage(),pos:"collect_playList"};if(o.resourceTypeExt&&(o.resourceTypeExt==3||o.resourceTypeExt==4)){r.album_title=o.albumTitle;r.album_id=o.albumId;r.isPay=3;ting.checkSellResourse(o.id,o.albumId,function(e,i){o.isPay=i;if(o.isPay!=1||o.siPresaleFlag==1||o._aiPresaleFlag==1){ting.media.collectPlaylist(o.albumId,o)}else{c()}})}else{c()}function c(){ting.connect.collectPlaylist(null,l,function(i){e(t).data("collected",true);if(i.data.illegal==1){var a=e("<p>你选中的歌曲部分需要进行付费，暂时不支持批量操作。<br/>你可以对单曲进行付费收藏到云。</p>");a.dialog({className:"dialog-message",showBtn:true,confirm:{btn:"",close:true,callback:function(){},text:"知道了"},cancel:false,destroy:true,title:"&nbsp;",width:360,showBg:true}).dialog("show")}else{e(t).tip("tipup",{msg:"已收藏为歌单",iconClass:"tip-success"})}r.state=1;s("collect",r);ting.media.collectPlaylist(i.data.listId,{listTitle:l.title})},function(i){ting.DM=".baidu.com";if(location.host.indexOf("http://static3.qianqian.com/web/static/j/taihe.com")!=-1){ting.DM=".taihe.com"}else if(location.host.indexOf("http://static3.qianqian.com/web/static/j/qianqian.com")!=-1){ting.DM=".qianqian.com"}var l="tip-error";switch(i.errorCode){case 22331:i.errTip="云空间已满，去<a href ='http://yinyueyun.baidu.com/' target = '_blank'>整理云空间</a>吧！";break;case 22677:i.errTip="歌单数量已达上限，去<a href ='http://play%22+ting.dm+%22/' target = '_blank'>音乐盒整理</a>吧！";break;case 22232:i.errTip="对不起，千千音乐只能在中国内地提供服务";break;default:i.errTip="操作失败，请稍候再试";break}var a={msg:i.errTip?i.errTip:"操作失败",iconClass:l};if(i.errorCode=22331){a.showTime=5e3}else{a.showTime=1e3}r.state=i.errorCode;s("collect",r);e(t).tip("tipup",a)})}}})(jQuery);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/