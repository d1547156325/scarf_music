!function(){function e(e,r){return(/string|function/.test(typeof r)?g:m)(e,r)}var r=e.cache={};var t=this.String;function n(e,r){if(typeof e!=="string"){r=typeof e;if(r==="number"){e+=""}else if(r==="function"){e=n(e.call(e))}else{e=""}}return e}var a={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};function i(e){return a[e]}function u(e){return n(e).replace(/&(?![\w#]+;)|[<>"']/g,i)}var c=Array.isArray||function(e){return{}.toString.call(e)==="[object Array]"};function o(e,r){if(c(e)){for(var t=0,n=e.length;t<n;t++){r.call(e,e[t],t,e)}}else{for(t in e){r.call(e,e[t],t)}}}function f(e,r){var t=/(\/)[^/]+\1\.\.\1/;var n=("./"+e).replace(/[^/]+$/,"");var a=n+r;a=a.replace(/\/\.\//g,"/");while(a.match(t)){a=a.replace(t,"/")}return a}var s=e.utils={$helpers:{},$include:function(e,r,t){e=f(t,e);return m(e,r)},$string:n,$escape:u,$each:o};var l=e.helpers=s.$helpers;function m(r,t){var n=e.get(r)||p({filename:r,name:"Render Error",message:"Template not found"});return t?n(t):n}function g(e,n){if(typeof n==="string"){var a=n;n=function(){return new t(a)}}var i=r[e]=function(r){try{return new n(r,e)+""}catch(t){return p(t)()}};i.prototype=n.prototype=s;i.toString=function(){return n+""};return i}function p(e){var r="{Template Error}";var t=e.stack||"";if(t){t=t.split("\n").slice(0,2).join("\n")}else{for(var n in e){t+="<"+n+">\n"+e[n]+"\n\n"}}return function(){if(typeof console==="object"){console.error(r+"\n\n"+t)}return r}}e.get=function(e){return r[e.replace(/^\.\//,"")]};e.helper=function(e,r){l[e]=r};define(function(){return e});var d=function(e){var r=t(e);if(r.length==1){r="0"+r}return r};e.helper("userReplace",function(e,r,n){e=t(e)||"";r=r||[];n=n||false;var a=require("core/utils");e=a.htmlDecode(e);var i=new RegExp("(@([^ @:：])+)","gm");e=e.replace(i,function(e){var r=e.substr(1);return'<em class="user"><a target="_blank" href="/user?nickname='+encodeURIComponent(r)+'">'+e+"</a></em>"});var u=require("core/config");var c=u.cfg.emoji;$.map(c.custom,function(r,t){e=e.replace(new RegExp("\\"+t,"gm"),function(){return'<em class="face-hook"><b class="'+r+'"></b></em>'})});$.map(c.unicode,function(r,t){e=e.replace(new RegExp("\\"+t,"gm"),function(){return'<em class="face-hook"><b class="'+r+'"></b></em>'})});if(n){e=e.replace(/\r{0,}\n/g,"<p></p>")}return e});e.helper("jsonStringify",function(e){return JSON.stringify(e)});e.helper("_escapeHTML",function(e){return u(e)});e.helper("cutString",function(e,r,t,n){if(!e||!r){return false}var a=require("core/utils");return a.cutString(e,r,n,t)});e.helper("timeFormat",function(e){var r=require("core/utils");var t=e;var n=Math.ceil((new Date).getTime()/1e3);var a=r.dateFormat((new Date).getTime(),"yyyy-MM-dd"),i=Math.ceil(new Date(a).getTime()/1e3);var u=n-e;if(u<60){t="刚刚"}else if(u<60*60){var c=Math.ceil(u/60);t=Math.ceil(u/60)+"分钟前"}else if(e-i>0){t=r.dateFormat(e*1e3,"hh:mm")}else if(u<365*24*60*60){t=r.dateFormat(e*1e3,"MM-dd hh:mm")}else{t=r.dateFormat(e*1e3,"yyyy-MM-dd")}return t});e.helper("dateFormat",function(e,r){var r=r||"yyyy-MM-dd";var t=require("core/utils");return t.dateFormat(e*1e3,r)});e.helper("activeTimeFormat",function(e,r){var t={};var n=require("core/utils");var a=(new Date).getTime();e=e*1e3;r=r*1e3;if(a<e){t.status=0;if(n.dateFormat(e,"yyyy-MM-dd")==n.dateFormat(a,"yyyy-MM-dd")){t.today=true;t.str=n.dateFormat(e,"hh:mm")}else{t.today=false;t.str=Math.ceil((e-a)/(24*3600*1e3))}}else if(a>r){t.status=-1}else{if(n.dateFormat(r,"yyyy-MM-dd")==n.dateFormat(a,"yyyy-MM-dd")){t.today=true;t.str=n.dateFormat(r,"hh:mm")}else{t.today=false;t.str=Math.ceil(Math.abs((a-r)/(24*3600*1e3)))}t.status=1}return t});e.helper("getAbstract",function(e){var r=[];if(e.bth_info){var n=new Date(e.bth_info*1e3).getFullYear();if(n<1940){subYear="常青树"}else{subYear=t(n).substr(2,1)+"0后"}r.push(subYear)}if(e.tag){var a=e.tag.split(",");for(var i=0;i<a.length;i++){r.push(a[i])}}return r.join("·")});e.helper("checkImg",function(e,r,t){if(!e||$.trim(e)==""){var n=require("core/config"),n=n.cfg.pic;r=r||"INIT_PIC";return n[r]}if(r==="USER_URANK_PIC_60"&&(e.indexOf("http://static3.qianqian.com/web/static/j/musicugc.cdn.qianqian.com")>-1||e.indexOf("http://static3.qianqian.com/web/static/j/musicugc.qianqian.com")>-1||e.indexOf("http://static3.qianqian.com/web/static/j/musicdata.baidu.com")>-1||e.indexOf("http://static3.qianqian.com/web/static/j/ugcpic.qianqian.com")>-1)){var a=t||"";if(e.indexOf(".jpg@")>-1){e=e.substring(0,e.indexOf(".jpg@")+4)+a}else if(e.indexOf(".png@")>-1){e=e.substring(0,e.indexOf(".png@")+4)+a}else{e=e+a}}return e});e.helper("fenFormat",function(e){var e=Number(e)||0;if(e>9999){e=(e/1e4).toFixed(2)+"万"}return e});e.helper("dateFormatWeek",function(e){var e=new Date(e*1e3);var r;if(e.getDay()==0)r="周日";if(e.getDay()==1)r="周一";if(e.getDay()==2)r="周二";if(e.getDay()==3)r="周三";if(e.getDay()==4)r="周四";if(e.getDay()==5)r="周五";if(e.getDay()==6)r="周六";return r})}();

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/