(function(t){function e(t){var e=[];if(t.constructor==Array){for(var o=0,r=t.length;o<r;o++){e.push(t[o].name+"="+encodeURIComponent(t[o].value))}}else if(typeof t==="object"){for(var n in t){e.push(n+"="+encodeURIComponent(t[n]))}}else if(typeof t==="string"){return t}return e.join("&")}function o(t){t={type:t.type||"POST",url:t.url||"",timeout:t.timeout||5e3,onError:t.error||function(){},onComplete:t.complete||function(){},onSuccess:t.success||function(){},dataType:t.dataType||"",data:t.data||"",cache:t.cache!==undefined?t.cache:true};t.type=t.type.toUpperCase();if(typeof XMLHttpRequest=="undefined"){XMLHttpRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var o=new XMLHttpRequest;if(t.type.toUpperCase()=="GET"){var r=t.url.indexOf("?")>-1?t.url+"&"+e(t.data):t.url+"?"+e(t.data);if(!t.cache){r=r+"&"+ +new Date}o.open("GET",r,true);o.send()}else{var r=t.url;if(!t.cache){r=r+"&"+ +new Date}o.open("POST",r,true);o.setRequestHeader("content-type","application/x-www-form-urlencoded")}var n=false;var a=setTimeout(function(){n=true;t.onError()},t.timeout);o.onreadystatechange=function(){if(o.readyState==4&&!n){clearTimeout(a);if(i(o)){t.onSuccess(s(o,t.dataType))}else{t.onError(o.status)}t.onComplete();o=null}};o.send(e(t.data));function i(t){try{return!t.status&&location.protocol=="file"||t.status>=200&&t.status<300||t.status==304||navigator.userAgent.indexOf("safari")>-1&&typeof t.status==undefined}catch(e){return false}}function s(t,e){var o=t.getResponseHeader("content-type");var r=!e&&o&&o.indexOf("xml")>-1;r=e=="xml"||r?t.responseXML:t.responseText;if(e=="script")eval.call(Window,r);return r}}var r=document.createElement("a");r.href=document.referrer;var n={targetHost:r.origin?r.origin:r.protocol+"//"+r.hostname,proxyPath:"http://static4.qianqian.com/static/html/web_pc_proxy.html",url:"http://127.0.0.1:5277/?method={{method}}",timeout:2e3},a=function(t){Porthole.trace("proxy",t);if(t.origin===n.targetHost){var e=t.data||{};o({url:i(e),type:e.type,dataType:"json",data:JSON.stringify(e.post),timeout:s.opts.timeout,cache:false,success:function(t){windowProxy.post({errorCode:200,data:t})},error:function(){windowProxy.post({errorCode:500})}})}},i=function(t){t=t||{};var e=s.opts.url.replace("{{method}}",t.method||""),o=[];if(t.get){for(var r in t.get){o.push(r+"="+t.get[r])}o=o.join("&");if(e.indexOf("?")>-1){e+="&"+o}else{e+="?"+o}}return e},s={init:function(t){s.opts=n;for(var e in t){s.opts[e]=t[e]}var o=location.search.substring(1);if(o){o=o.split("&");for(var r in o){var i=o[r].split("=");s.opts[i[0]]=i[1]}}windowProxy=new Porthole.WindowProxy(s.opts.targetHost+s.opts.proxyPath);windowProxy.addEventListener(a);Porthole.WindowProxyDispatcher.start()}};t.apiProxy=s})(window);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/