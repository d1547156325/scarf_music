require(["core/utils"],function(t){var i=$(".btn-collect");var a=$(".btn-collected");var s=$(".collectText");var o=$(".collectNum");var e=i.data("artistid")||a.data("artistid");$(".btn-collect").live("click",function(){var a=$(this);if(!e){i.tip().tip("tipup",{msg:"该歌手信息有误！",iconClass:"tip-error"})}ting.passport.checkLogin(function(){t.tingApi("baidu.ting.ugcdiy.addFavoriteDiy",{list_id:e||"",source:2}).done(function(t){if(t.error_code==22e3){a.data("collected",true).tip().tip("tipup",{msg:"收藏成功",iconClass:"tip-success"});a.addClass("btn-collected").removeClass("btn-collect");s.html("已收藏");o.html(Number(o.html())+1)}}).fail(function(t){var a="tip-error";var o="";switch(Number(t.error_code)){case 22713:a="tip-warning";o="歌手已收藏过";s.html("已收藏");break;case 22001:o="操作失败，请稍候再试 ";break;case 22706:o="收藏数量已满，去个人中心管理收藏吧";break;default:o="操作失败，请稍候再试 "}i.tip().tip("tipup",{msg:o,iconClass:a})})})});$(".btn-collected").live("click",function(){var a=$(this);var r={list_id:e||"",source:2};t.tingApi("baidu.ting.ugcdiy.deleteFavoriteDiy",r).done(function(t){if(t.error_code==22e3){a.data("collected",false);a.tip().tip("tipup",{msg:"取消收藏成功！",iconClass:"tip-success"});a.addClass("btn-collect").removeClass("btn-collected");s.html("收藏");var i=Number(o.html());i=i==0?0:i-1;o.html(i)}}).fail(function(t){var a="tip-error";var s="操作失败，请稍候再试 ";i.tip().tip("tipup",{msg:s,iconClass:a})})});var r=window.location.href.split("/")[4],n,l,c;artistListApiInfo=function(){var i={from:"web",tinguid:r};t.tingApi("baidu.ting.artist.getInfo",i).always(function(t){n=t.is_collect;l=t.collect_num||0;if(n==1){c="已收藏"}else{c="收藏"}$(".opera").find(".collect-artist").html('<span class="btn-text"><i class="btn-icon  btn-collect-icon"></i><span class="collectText">'+c+'</span><em class="collectNum">'+l+"</em></span>");if(n==1){$(".opera").find(".collect-artist").removeClass("btn-collect");$(".opera").find(".collect-artist").addClass("btn-collected")}})};artistListApiInfo();$(".opera").find(".collect-artist").live("click",function(){artistListApiInfo()})});$(function(){var t=encodeURIComponent(window.artistname);link={img:"http://image.baidu.com/search/index?ct=201326592&cl=2&nc=1&lm=-1&st=-1&tn=baiduimage&istype=2&fm=&pv=&z=0&ie=utf-8&word="+t,tieba:"http://tieba.baidu.com/f?ie=utf-8&kw="+t};$("#artistImgLink").bind("click",function(){if($(this).attr("href")=="javascript:;"){$(this).attr("href",link.img).attr("target","_blank")}});$("#artistTieba").bind("click",function(){$(this).attr("href",link.tieba).attr("target","_blank")});$(".play-all-hook").click(function(){var t=$(this).data("ids")?$(this).data("ids").toString().split(","):$(this).data("playdata").ids,i={moduleName:$(this).data("playdata").moduleName};ting.media.playSong(t,i);$(this).tip().tip("tipup",{msg:"已开始播放",iconClass:"tip-success"});if(ting&&ting.logger&&ting.logger.plogClick){ting.logger.plogClick("play_all")}if(ting.browser.isSpecial()){ting.browser.add2box("play")}return false});$(".song-list-hook").songList();$(".album-cover-hook").albumCover();$(".album-list .songlist-fold-hook").songlistExpand({hotBar:true,moduleName:"album"});$("#singerWorks").tab({callBackStartEvent:function(t){ting.LL&&ting.LL.add($(".cover-image, .lazyload",$($(".ui-tab-content")[t])))}});var i=function(){var t=window.opera?document.compatMode=="CSS1Compat"?$("html"):$("body"):$("html,body");var i=$("#singerWorks").offset().top;t.stop().animate({scrollTop:i},200)};var a=0;var s=$("#singerWorks .songs-list .page-navigator-hook").pageNavigator();s.bind("pagenavigator.pagechange",function(t,a){var s={start:a.start,worksList:$("#songList")},o=m(s),e=$("#singerWorks .songs-list .sort .on");o.order=e.attr("type");o.hotmax=hotbarMax;o.pay=e.data("pay");f(s);ting.connect.getArtistSong(o,null,function(t){$(".song-list-wrap",s.worksList).html(t.data.html);v(s);$(".song-list-hook",s.worksList).songList();$(".music-icon-hook",s.worksList).musicIcon();i()})});var o=$("#singerWorks .songs-list .sort a");o.click(function(t){t.stopPropagation();if($(this).hasClass("on")){return false}var i={start:0,worksList:$("#songList")},a=m(i);a.order=$(this).attr("type");a.pay=$(this).data("pay");a.hotmax=hotbarMax;f(i);ting.connect.getArtistSong(a,null,function(t){$(".song-list-wrap",i.worksList).html(t.data.html);v(i);$(".song-list-hook",i.worksList).songList();$(".music-icon-hook",i.worksList).musicIcon()},function(){});$(this).addClass("on").siblings("a").removeClass("on");$("#singerWorks .songs-list .page-navigator-hook").pageNavigator("setPage",1);return false});var e=$("#singerWorks .albums-list .page-navigator-hook").pageNavigator();e.bind("pagenavigator.pagechange",function(t,a){var s={start:a.start,worksList:$("#albumList")},o=m(s);o.order=$("#singerWorks .albums-list .sort .on").attr("type");f(s);ting.connect.getArtistAlbum(o,null,function(t){$(".album-list-wrap",s.worksList).html(t.data.html);v(s);$(".album-list .songlist-fold-hook",s.worksList).songlistExpand({hotBar:true,moduleName:"album"});$(".album-cover-hook",s.worksList).albumCover();i()})});var r=$("#singerWorks .albums-list .sort a");r.click(function(t){t.stopPropagation();var i={start:0,worksList:$("#albumList")},a=m(i);a.order=$(this).attr("type");f(i);ting.connect.getArtistAlbum(a,null,function(t){$(".album-list-wrap",i.worksList).html(t.data.html);v(i);$(".album-list .songlist-fold-hook",i.worksList).songlistExpand({hotBar:true,moduleName:"album"});$(".album-cover-hook",i.worksList).albumCover()},function(){});$(this).addClass("on").siblings("a").removeClass("on");$("#singerWorks .albums-list .page-navigator-hook").pageNavigator("setPage",1);return false});var n=$("#singerWorks .mvs-list .page-navigator-hook").pageNavigator(),l=$("#singerWorks .mvs-list .sort a"),c=function(t,i){return function(a,s){var o=this,e={start:s?s.start:0,worksList:$("#mvList")},r=m(e);r.order=$("#singerWorks .mvs-list .sort .on").attr("type");f(e);ting.connect.getArtistMV(r,null,function(i){$(".mv-list-wrap",e.worksList).html(i.data.html);ting.LL&&ting.LL.add($(".lazyload",e.worksList));v(e);t&&t.call(o)});i&&i.call(o);return false}},p=function(){$(this).addClass("on").siblings("a").removeClass("on");$("#singerWorks .mvs-list .page-navigator-hook").pageNavigator("setPage",1)};n.bind("pagenavigator.pagechange",c(i,null));l.click(c(null,p));var g=12;var d=-1;var u=function(t){var s=parseInt(t/g),o,e,r;if(!s&&s!==0){return}if(s==d){return}d=s;a=s*g;o={start:a,worksList:$("#photoList")};e=m(o);e.size=g;f(o);ting.connect.getArtistPhotos(e,null,function(t){$(".photo-list-wrap",o.worksList).html(t.data.html);v(o);i()});h.pageNavigator("setPage",d+1)};var h=$("#singerWorks .photos-list .page-navigator-hook").pageNavigator();h.bind("pagenavigator.pagechange",function(t,i){u(i.start)});var m=function(t){var i=$("#baseInfo"),a={start:t.start,ting_uid:i.attr("ting_uid")};return a};var f=function(t){$mask=$("<div>").attr("class","ajax-mask").css("height",t.worksList.height());$maskBox=$("<div>").attr("class","ajax-mask-box").html("加载中...");t.worksList.css({position:"relative",zoom:1}).append($mask).append($maskBox)};var v=function(t){$mask=$("<div>").attr("class","ajax-mask");$maskBox=$("<div>").attr("class","ajax-mask-box");$(".ajax-mask",t.worksList).remove();$(".ajax-mask-box",t.worksList).remove()};var k=$(".photos-info"),b=$(".phpto-view");$(".photo-list").delegate(".photo-item","click",function(){var t=$("a",$(this)).attr("href").split("#")[1]||"",i=window.location.href,s={id:t.split("-")[0],index:t.split("-")[1]};window.location.href=i.split("#")[0]+"#"+s.id+"-"+s.index;b.show();k.hide();w.photoview("ajaxdata",a+parseInt(s.index),s.index);return false});$(".phpto-view .back").click(function(){b.hide();k.show();return false});var w=$(".photo-view-hook");var x=12;var L=function(t){var i=t.id,a=t.index;w.photoview({id:i,total:w.attr("total"),prebtn:".photo-pre",nextbtn:".photo-next",ajaxParam:{ting_uid:w.attr("ting_uid"),type:"fans",size:x,start:a}}).bind("photoview.loadinfo",function(t,i){var a=i.currentInfo,s=i.p_index*1+1,o=i.options;u(i.p_index);if(s==1){o.prebtn&&$(o.prebtn).addClass("disable")}else{o.prebtn&&$(o.prebtn).removeClass("disable")}if(s==o.total){o.nextbtn&&$(o.nextbtn).addClass("disable")}else{o.nextbtn&&$(o.nextbtn).removeClass("disable")}$(".photo-order").html(s)}).photoview("ajaxdata");$(".photo-pre ,.photo-next").bind("click",function(t){if($(t.currentTarget).hasClass("photo-pre")){$(".photo-view-hook").photoview("getNext",-1)}if($(t.currentTarget).hasClass("photo-next")){$(".photo-view-hook").photoview("getNext",1)}return false})};L({id:0,index:0});var C=0,y=false;$("#updateArtist").bind("click",function(){var t=$(".related-list"),i=$(".related-list:visible");i.hide();++C;if(C>=t.length){C=0;y=true}if(!y){$(".cover img",$(t[C])).each(function(){var t=$(this).attr("org_src"),i=$(this).attr("src");if(t!=i){$(this).attr("src",t)}})}$(t[C]).show();return false});$(".related-list li").bind("click",function(){var t=$(this).parent().data("data"),i=$(this).data("data");var a={page:"m_artist",pos:"commend",method:i.m,test:t.t,starid_page:t.id,starid_click:i.id};ting.logger.log("click",a)});if($(".related-singer").length){var _={ref:"music_web",page:"m_artist",artistname:artistname,expoitem:"similarartist"};ting.logger.log("exposure",_)}ting.logger.exposureAndAnchorClickLog("m_artist",[{root:$(".mod-newsong"),logName:"newalbum",returnFalseSelector:[]}]);$("#baike_artist").on("click",function(){ting.logger.plogClick("jianjie")});var N={};var A=$(".related-list");var W=$(".related-list li");var T=0;var I=0;var j=$(".arrow-up");var B=false;var S=false;N.tipLogger=function(t,i,a){ting.logger.log("click",{page:t,pos:i,sub:a})};N.clickLogger=function(t,i,a,s){$(t).click(function(){N.tipLogger(i,a,s)})};N.clickLogger(".related-list .i-piao","m_artist","recommend","icon");N.clickLogger(".related-list .mesg-box","m_artist","recommend","tips");N.clickLogger(".ticket-link","m_artist","normal","tips");N.Tipscontent=function(t,i){var a=t+"演唱会门票，火热抢票中！";return'<div class="ticket-expire tips">'+'<span class="arrow-up"></span>'+'<a href="#" class="close css-close">X</a>'+'<p class="mesg-box"><a href="http://piao.baidu.com/show/detail/%27+i+%27?pst=artist_recommend" target="_blank">'+a+"</a></p>"+"</div>"};N.tipArrow=function(t,i,a){var s=t-i*3;var o=35+75*s;var e=o+"px";if(a>0){A.eq(a).find(".arrow-up").eq(I).css("left",e);I++}A.eq(a).find(".arrow-up").eq(T).css("left",e);T++};N.Tisclose=function(){$(".ticket-expire .close").each(function(t){$(this).click(function(){$(this).closest(".ticket-expire").hide();$.cookie("ticketEx","4",{expires:1});return false})})};N.Tipslist=function(t){var i=A.eq(t).find("li");i.each(function(t){var i=Math.floor(t/3),a=t%3===0;var s=(i+1)*3-1;if(a){B=false}var o=$(this).find(".i-piao");if(B===false&&o.length>0){var e=o.data("singer");var r=o.data("ticketid");B=true}})};ting.ticket=N;ting.ticket.Tipslist(0);ting.ticket.Tipslist(1);ting.ticket.Tisclose();var P=$(".topBanner .clickpop"),q=$(".popupBanner .close"),z=$(".popupBanner"),E=$(".container .popupBg");$popLeft=($(window).width()-960)/2+"px",$popTop=($(window).height()-400)/2+"px";P.click(function(t){t.preventDefault();E.css({display:"block",width:$(window).width(),height:$(window).height()});if($.browser.msie&&parseInt($.browser.version)==6){z.css({display:"block",position:"absolute"})}else{z.css({display:"block",left:$popLeft,top:$popTop})}});q.click(function(t){t.preventDefault();z.css({display:"none"});E.css({display:"none"})});var C=0,y=false;$("#sale-album-update").bind("click",function(){var t=$(".sale-album"),i=$(".sale-album:visible");i.hide();++C;if(C>=t.length){C=0;y=true}if(!y){$(".cover img",$(t[C])).each(function(){var t=$(this).attr("org_src"),i=$(this).attr("src");if(t!=i){$(this).attr("src",t)}})}$(t[C]).show();return false})});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/