require(["core/utils","tmpl/rank/redrank/loadmoreList","tmpl/rank/redrank/dayweektotal","tmpl/rank/redrank/list","widget/toast/toast","widget/ushare/ushare","page/rank/redrank/common"],function(i,s,a,t,n,e){var l=$("#listTmpl"),o=["today","week","month"],r=["today"],g=["ubang","zhuanjibang","fuhaobang"],d={type:o[0],page:0,size:20,have_more:0,albumid:k,plugin:{week_id:0}};var h,u,v,b,f,c,m,p,C,w,q,k,_,y,U,z;if($(".ubang").hasClass("bang-visit")){nowbang=g[0]}if($(".zhuanjibang").hasClass("bang-visit")){nowbang=g[1]}if($(".fuhaobang").hasClass("bang-visit")){nowbang=g[2]}var A=$("#bang-wrapper");A.on("click",".icon-date",function(i){$(".qishu-content").removeClass("qishu-visit");z=A.find(".date-content").data("id");$(".qishu-content:eq("+(z-1)+")").addClass("qishu-visit");A.find(".qishu").show()}).on("click",".qishu-btn",function(i){z=A.find(".date-content").data("id");$(".qishu-content:eq("+(z-1)+")").addClass("qishu-visit");A.find(".qishu").hide()});A.on("click",".qishu",function(i){$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")});var A=$("#bang-wrapper");var S=$(".zhuanjibang");var x=$(".fuhaobang");var T=$(".ubang");if(S.hasClass("bang-visit")){o[2]="month"}if(T.hasClass("bang-visit")){o[2]="month"}A.html(a({bill:d.type,bang:nowbang}));A.on("click",".d-bang",function(i){var s=0;$(".bang").removeClass("visit");$(this).addClass("visit");A.find(".date").show();r=o[0];I(s,v);if(T.hasClass("bang-visit")){ting.logger.log("illclick",{page:"U榜",sub:"日排行榜",pos:""})}}).on("click",".wk-bang",function(i){var s=0;$(".bang").removeClass("visit");$(this).addClass("visit");A.find(".date").show();r=o[1];D(s,h);if(T.hasClass("bang-visit")){ting.logger.log("illclick",{page:"U榜",sub:"周排行榜",pos:""})}}).on("click",".m-bang",function(i){var s=0;$(".bang").removeClass("visit");$(this).addClass("visit");r=o[2];L(s,f);if(T.hasClass("bang-visit")){ting.logger.log("illclick",{page:"U榜",sub:"月排行榜",pos:""})}});A.on("click",".icon-left",function(i){if($(".d-bang").hasClass("visit")){if(v>1){v=v-1;if(r==o[0]){C=v;I(m,v)}}}if($(".wk-bang").hasClass("visit")){if(h>1){h=h-1;if(r==o[1]){w=h;D(m,h)}}}if($(".m-bang").hasClass("visit")){if(f>1){f=f-1;if(r==o[2]){q=f;L(m,f)}}}});A.on("click",".icon-right",function(i){if($(".d-bang").hasClass("visit")){if(v<b){v=v+1;if(r==o[0]){p=v;C=v;I(m,v)}}}if($(".wk-bang").hasClass("visit")){if(h<u){h=h+1;if(r==o[1]){p=h;w=h;D(m,h)}}}if($(".m-bang").hasClass("visit")){if(f<c){f=f+1;if(r==o[2]){q=f;L(m,f)}}}});var A=$("#bang-wrapper");A.on("click",".icon-date",function(i){A.find(".qishu").show()}).on("click",".qishu-btn",function(i){A.find(".qishu").hide();if(A.find(".d-bang").hasClass("visit")){C=z}if(A.find(".wk-bang").hasClass("visit")){w=z}if(A.find(".m-bang").hasClass("visit")){q=z}});A.on("click",".qishu",function(i){if($(i.target).hasClass("qishu-wrapper")||$(i.target).hasClass("qishu")||$(i.target).hasClass("qishu-btn")){var s=A.find(".date-content").data("id");$(".qishu-content:eq("+(s-1)+")").addClass("qishu-visit");$(".qishu-wrapper").removeClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")}else{$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit");$(".qishu-wrapper").removeClass("qishu-visit");var s=$(".qishu-wrapper").find(".qishu-visit").data("id");if(A.find(".d-bang").hasClass("visit")){C=s;v=s;I(m,s)}if(A.find(".wk-bang").hasClass("visit")){w=s;h=s;D(m,s)}if(A.find(".m-bang").hasClass("visit")){q=s;f=s;L(m,s)}A.find(".qishu").hide()}});var B=function(s,a){i.tingApi("baidu.ting.active.getPeriod",a).done(function(i){C=i.result.today_nums||0;w=i.result.week_nums||0;q=i.result.total_month||0;_=i.result.today_nums||0;y=i.result.week_nums||0;U=i.result.total_month||0})};B();var F=function(s,a){i.tingApi("baidu.ting.active.getPeriod",a).done(function(i){_=i.result.today_nums||0;y=i.result.week_nums||0;U=i.result.total_month||0})};var j;var P=function(s,n){F();if(T.hasClass("bang-visit")){ting.logger.log("illclick",{page:"U榜",sub:"日排行榜",pos:""})}m=s||0;p=n||0;var n={bill_type:o[0],offset:m,limit:d.size,period:p};i.tingApi("baidu.ting.active.getUBill",n).always(function(i){d=$.extend(d,{type:o[0],page:m>0?++d.page:1,have_more:i.have_more||0});l.html(t({ulist:i.result||[],type:o,loadmore:d.have_more,r:i}));A.html(a({bill:o,nums:C||0,allnums:_,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".bang").removeClass("visit");$(".d-bang").addClass("visit");$(".qishu-content:last").addClass("qishu-visit");h=w;u=y;v=C;b=_;f=q;c=U;j=i.result||[]}).fail(function(i){if(i.error_code==22001){F();l.html(t({r:i}));A.html(a({bill:o[0],nums:C,allnums:_,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(z-1)+")").addClass("qishu-visit")}})};P();var D=function(s,n){F();m=s||0;p=n||0;var n={bill_type:o[1],offset:m,limit:d.size,period:p};i.tingApi("baidu.ting.active.getUBill",n).done(function(i){d=$.extend(d,{type:o,page:m>0?++d.page:1,have_more:i.have_more||0});l.html(t({ulist:i.result||[],type:o,loadmore:d.have_more,r:i}));A.html(a({bill:d.type,nums:w||0,allnums:y,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(w-1)+")").addClass("qishu-visit");if(r==o[0]){$(".bang").removeClass("visit");$(".d-bang").addClass("visit")}if(r==o[1]){$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}if(r==o[2]){$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}if(r==o[2]){$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}h=w;u=y;v=C;b=_;f=q;c=U}).fail(function(i){F();if(i.error_code==22001){l.html(t({r:i}));A.html(a({bill:o[1],nums:w,allnums:y,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(z-1)+")").addClass("qishu-visit");$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}})};var I=function(s,n){F();m=s||0;p=n||0;var n={bill_type:o[0],offset:m,limit:d.size,period:p};i.tingApi("baidu.ting.active.getUBill",n).done(function(i){d=$.extend(d,{type:o,page:m>0?++d.page:1,have_more:i.have_more||0});l.html(t({ulist:i.result||[],type:o,loadmore:d.have_more,r:i}));A.html(a({bill:d.type,nums:C||0,allnums:_,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(C-1)+")").addClass("qishu-visit");if(r==o[0]){$(".bang").removeClass("visit");$(".d-bang").addClass("visit")}if(r==o[1]){$(".bang").removeClass("visit");$(".wk-bang").addClass("visit")}if(r==o[2]){$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}if(r==o[2]){$(".bang").removeClass("visit");$(".all-bang").addClass("visit")}}).fail(function(i){F();if(i.error_code==22001){l.html(t({r:i}));A.html(a({bill:o[0],nums:C,allnums:_,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(z-1)+")").addClass("qishu-visit")}})};var L=function(s,n){F();m=s||0;p=n||0;var n={bill_type:o[2],offset:m,limit:d.size,period:p};i.tingApi("baidu.ting.active.getUBill",n).done(function(i){d=$.extend(d,{type:o,page:m>0?++d.page:1,have_more:i.have_more||0});l.html(t({ulist:i.result||[],type:o,loadmore:d.have_more,r:i}));A.html(a({bill:d.type,nums:q||0,allnums:U,bang:nowbang}));$(window).bind("scroll",windowScroll);$(".qishu-content:eq("+(q-1)+")").addClass("qishu-visit");$(".bang").removeClass("visit");$(".m-bang").addClass("visit")}).fail(function(i){F();if(i.error_code==22001){l.html(t({r:i}));A.html(a({bill:o[0],nums:C,allnums:U,bang:nowbang}));$(".qishu-content").removeClass("qishu-visit");$(".qishu-content:eq("+(z-1)+")").addClass("qishu-visit")}})};var E=0;windowScroll=function(){var i=parseFloat($(window).scrollTop());var s=parseFloat($(window).height())+i;if(parseFloat($(window).scrollTop())<=E){E=parseFloat($(window).scrollTop());return false}E=parseFloat($(window).scrollTop());if($(document).height()-150<=s){$(window).unbind("scroll");if(d.have_more){tabDataInit=false;m=m+20;G()}else{}}};$(window).bind("scroll",windowScroll);var G=function(){var a,t;if(A.find(".d-bang").hasClass("visit")){a=o[0];i:v}else if(A.find(".wk-bang").hasClass("visit")){a=o[1];i:h}else{a=o[2];i:f}var n=$(".date");var e=n.find(".date-content").data("id");var l={bill_type:a,offset:m,limit:d.size,period:e};i.tingApi("baidu.ting.active.getUBill",l).done(function(i){d=$.extend(d,{page:m>0?++d.page:1,have_more:i.have_more||0});var a=$(".u-bang");a.append(s({ulist:i.result||[],type:o,offset:m,loadmore:d.have_more}))})};bdShare({bdText:"千千音乐U榜，遇见更好的你，快来给你心中的ta打榜吧！",bdDesc:"千千音乐U榜，遇见更好的你，快来给你心中的ta打榜吧！",bdUrl:"http://music.taihe.com/cms/webview/celebrity_list/v1/#/",bdPic:"../../../../music.taihe.com/static/images/page/rank/redrank/wh_share.jpg"/*tpa=http://music.taihe.com/static/images/page/rank/redrank/wh_share.jpg*/});$(".share-list").on("click",function(){if(T.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"U榜",sub:"月排行榜",pos:""})}}if(S.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"专辑榜",sub:"月排行榜",pos:""})}}if(x.hasClass("bang-visit")){if($(".d-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"日排行榜",pos:""})}if($(".wk-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"周排行榜",pos:""})}if($(".m-bang").hasClass("visit")){ting.logger.log("share",{page:"富豪榜",sub:"月排行榜",pos:""})}}})});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/