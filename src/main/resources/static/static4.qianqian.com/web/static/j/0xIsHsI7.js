void function(e,i){var n=null;e.widget("ting.refreshTrigger",{options:{eventName:"click",attrName:"href",stopEvent:true,urlFilter:"default",target:"",url:"",args:null,repeat:true,stamp:"_t"},_create:function(){var i=this,n=i.element,t=i.options;i.widgetEventPrefix="refreshTrigger.";i.url=t.url||(typeof t.urlFilter=="function"?t.urlFilter(n.attr(t.attrName)):e.ting.refreshTrigger.filters[t.urlFilter]&&e.ting.refreshTrigger.filters[t.urlFilter](n.attr(t.attrName)))},_init:function(){var e=this,i=e.element,n=e.options;e.init=false;n.eventName&&i.bind(n.eventName,function(i){return e.refresh()});i.bind("refreshtrigger.beforerefresh",function(){if(!n.repeat){return!e.init}}).bind("refreshtrigger.afterrefresh",function(){e.init=true})},refresh:function(){var i=this,n=i.options;if(!n.disabled&&false!==i._trigger("beforeRefresh",null,{url:i.url})){e.ting.refreshTrigger.refresh(n.target,i.url,n.args,function(){i._trigger("afterRefresh",null,{url:i.url,element:this})},n.stamp)}return!n.stopEvent}});function t(e){if(document.createStyleSheet){n=n||document.createStyleSheet();n.cssText+=e}else{n||(n=document.createElement("style"),n.type="text/css",document.getElementsByTagName("head")[0].appendChild(n));n.appendChild(document.createTextNode(e))}}e.extend(e.ting.refreshTrigger,{refresh:function(i,n,a,o,s){var c={};s&&(c[s]=+new Date);e.get(n,e.extend(c,typeof a=="function"?a.call(i):a),function(i,n){return function(a){t(a.data.css);var o=e(i).html(a.data.html);new Function(a.data.js).call(o);n&&n.call(o)}}(i,o),"json")},filters:{"default":function(e){return String(e).replace(/^.*?#~/,"")}}})}(jQuery);(function(e){e.widget("ui.sendByAccount",{options:{songId:""},$dialog:{device:null,list:null,commit:null,result:null},_create:function(){this.widgetEventPrefix="send:";this._createDialog();this._bindEvent()},_createDialog:function(){if(!this.$dialog.device){this.$dialog.device=e('<div class="device-dialog send-dialog">                         <div class="head"><div class="close"></div><h3>选择移动设备</h3></div>                         <div class="body">                             <ul class="device-list"></ul>                             <div class="btn-wrapper">                                 <a href="javascript:;" class="btn btn-h btn-i commit">                                     <span class="inner"> <span class="txt">发送到移动设备</span> </span>                                 </a>                             </div>                             <div class="tip">                                 <p>如何添加新设备？</p>                                 <p><strong>登录</strong> “千千音乐” 移动客户端，即可添加设备，刷新页面就可以看到新设备。</p>                             </div>                         </div>                     </div>');this.$dialog.result=e('<div class="result-dialog send-dialog success unbind">                         <div class="head"><div class="close"></div></div>                         <div class="body"><div class="icon"></div><div class="text"></div><p class="tip"></p></div>                         <div class="foot">                             <h5>怎么在手机客户端接收歌曲？</h5>                             <ol>                                 <li>                                     下载并安装最新版千千音乐移动客户端：<br/>                                     <a href="http://static4.qianqian.com/cms/mobile/static/apk/BaiduMusic_musicfsdx.apk" title="Android版">                                         <span class="icon android-icon-small"></span>Android版                                     </a>                                     <a href="http://itunes.apple.com/cn/app/id468623917" title="iPhone版">                                         <span  class="icon iphone-icon-small"></span>iPhone版                                     </a>                                     <a href="https://itunes.apple.com/cn/app/bai-duting/id585579073" title="iPad版">                                         <span class="icon pad-icon-small"></span>iPad版                                     </a>                                 </li>                                 <li>打开千千音乐手机客户端并登录</li>                                 <li>进入“我的下载”就可以看见它啦</li>                             </ol>                         </div>                     </div>');this.$dialog.list=this.$dialog.device.find(".device-list");this.$dialog.commit=this.$dialog.device.find(".commit");e("body").append(this.$dialog.device).append(this.$dialog.result);this.$dialog.device.dialog({width:486,showBg:false});this.$dialog.result.dialog({width:486,showBg:false});this._bindDialogEvent()}},_bindEvent:function(){var e=this;this.element.on("click",function(i){i.preventDefault();ting.connect.getDevice(null,null,function(i){if(i.data.length){e._showDeviceLayer(i.data);e._trigger("device:complete")}else{e.send(e.options.songId)}},function(){e._trigger("device:complete")},function(){e._trigger("device:complete")});e._trigger("click")})},_bindDialogEvent:function(){var i=this.$dialog.commit,n=this;i.on("checkbox:change",function(){var e=n.getCheckedDevice();i[e.length?"removeClass":"addClass"]("btn-i")});i.on("click",function(){var t=e(".down-song-btn").data("btndata");if(!!t){var a={id:t.id,mediaType:1,albumId:t.albumId,resourceTypeExt:t.pay_type||t.resourceTypeExt||"",siPresaleFlag:t.siPresaleFlag||"",songPic:t.songPic||"",songTitle:t.songTitle||"",songPublishTime:t.songPublishTime||""};if(a.resourceTypeExt&&(a.resourceTypeExt==3||a.resourceTypeExt==4)){ting.checkSellResourse(a.id,a.albumId,function(e){a.isPay=e;if(e!=1){if(a.siPresaleFlag==1){ting.media.checkToSellPage(a)}else{ting.media.checkToSellPage(a)}}else{o()}})}else if(e(".down-song-btn").hasClass("down-btn-vip")&&BDUS&&BDUS.vipState!="gold"){ting.checkSellResourse(a.id,a.albumId,function(i){if(i!=1){ting.media.toSellPage(4,a,e("#download-block-to").clone())}else{o()}});return}else{o()}}else{o()}function o(){var e=n.getCheckedDevice(),t=i.data("songId");if(e.length){n.send(t,e.join(","));n._setHistoryDevice(e)}}});this.$dialog.device.on("delete",function(e,i){if(i===0){n._hideDeviceLayer()}})},_hideDeviceLayer:function(){this.$dialog.device.dialog("hide")},_showDeviceLayer:function(e){this._updateDeviceList(e);this.$dialog.result.hide().dialog("hide");this.$dialog.device.dialog("show")},showResultLayer:function(e,i,n){this._updateResultLayer(e,i,n);this.$dialog.device.hide().dialog("hide");this.$dialog.result.dialog("show")},_updateDeviceList:function(i){var n=this,t=[{ios:"iphone",android:"android"},{ios:"pad",android:"pad"},{ios:"iphone",android:"android"}],a=this.$dialog.list,o=this._getHistoryDevice(),s=i.length;a.empty();e.each(i,function(i,c){var l=t[parseInt(c.type)-1];l=l?l[c.platform.toLowerCase()]:"android";var d=e('<li>                         <label for="dev'+c.id+'">                             <span><input type="checkbox" class="checkbox" data-id="'+c.id+'" id="dev'+c.id+'"/></span>                             <span class="type '+l+'-icon-small"></span>                             <span class="name">'+c.device_name+"</span>                             "+(c.platform.toLowerCase()==="ios"&&c.token?'<span class="device-tip">ios设备请打开“设置”，进入“通知中心”，找到千千音乐打开“提醒”</span>':"")+'                         </label>                         <a class="delete" href="#">移除</a>                      </li>');var r=d.find(".checkbox");d.find(".checkbox").on("click",function(){var i=e(this).prop("checked");d[i?"addClass":"removeClass"]("actived");n.$dialog.commit.trigger("checkbox:change")});d.find(".delete").one("click",function(){ting.connect.deleteDevice(null,{device_id:c.id},function(){d.off();d.slideUp(function(){d.remove()});n.$dialog.commit.trigger("checkbox:change");n.$dialog.device.trigger("delete",[--s])},function(){});return false});a.append(d);if(!o||e.inArray(c.id,o)>-1){r.prop("checked",true).trigger("click").prop("checked",true)}n.$dialog.commit.data("songId",n.options.songId)})},_updateResultLayer:function(e,i,n){var t=this.$dialog.result;t[i?"removeClass":"addClass"]("unbind");if(e){t.removeClass("fail").addClass("success");t.find(".text").text("发送成功！")}else{t.removeClass("success").addClass("fail");t.find(".text").text("发送失败，请稍后再试！")}n=n||"";t.find(".tip").html(n)},getCheckedDevice:function(){var i=this.$dialog.device.find(".checkbox:checked"),n=[];e.each(i,function(i,t){n.push(e(t).data("id"))});return n},send:function(e,i){var n=this;this._trigger("start");ting.connect.sendSongByWireless(null,{song_id:e,device_id:i},function(){n.showResultLayer(true,i!==undefined,i!==undefined?"<strong>登录</strong>客户端进入“我的下载”你就能找到它了":"");n._trigger("success",null,e,i)},function(t){var a=t.errorCode==23e3?"服务器存储用户从网站发送到移动设备的歌曲数量已超上限，请到移动客户端去接收之前的下载任务":"";n.showResultLayer(false,i!==undefined,a);n._trigger("error",null,e,i,t.errorCode)})},_getHistoryDevice:function(){var i=e.cookie("send2Mobile");return i?i.split(","):null},_setHistoryDevice:function(i){e.cookie("send2Mobile",i.join(","))}})})(jQuery);require(["tmpl/common/pop_window/pop_cantPlay","tmpl/common/pop_window/pop_cantNoMv"],function(e,i){$(".music-main").append('<div id="pop-hui" class="pop-hui-dis"></div>');var n=$("#pop-hui"),t=null,a=null,o=null;init_mv=function(i){n.html(e({datamv:i}))};init_nomv=function(e){n.html(i())};romance=function(){n.removeClass("pop-hui-dis");if(t){init_mv(t)}else{init_nomv()}};$("body").on("click",".close-window-hook",function(){n.addClass("pop-hui-dis")});$("body").on("click",".song-message-gray .icon-play-disabled",function(){t=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});$("body").on("click",".song-message-gray .icon-add-disabled",function(){t=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});$("body").on("click",".song-message-gray .icon-download-disabled",function(){t=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});$("body").on("click",".song-message-gray .icon-collects-disabled",function(){t=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});$("body").on("click",".song-message-gray .icon-send-disabled",function(){t=$(this).parent().parent().parent().find(".mv-icon").data("mv");romance()});init_song_mv=function(i){n.html(e({datamv:i}))};init_song_nomv=function(e){n.html(i())};romance_song=function(){n.removeClass("pop-hui-dis");if(a){init_song_mv(o)}else{init_song_nomv()}};if($(".play-all-disabled").length){$("body").on("click",".song-opera .tool-btn-disabled",function(){a=$(this).parent().parent().parent().find(".mv-item-unic").data("mv");o=a;romance_song()});$("body").on("click",".song-opera .song-collect-disable",function(){a=$(this).parent().parent().parent().find(".mv-item-unic").data("mv");o=a;romance_song()});$("body").on("click",".song-opera .play-all-disabled",function(){a=$(this).parent().parent().parent().find(".mv-item-unic").data("mv");o=a;romance_song()})}$("body").on("click",".songn-info-box .gray",function(){var e=window.location.href.split("/");a=$(".song-img").data("mvid");o=e[0]+"//"+e[2]+"/playmv/"+a;romance_song();return});$("body").on("click",".songpage-fixed .gray",function(){var e=window.location.href.split("/");a=$(".song-img").data("mvid");o=e[0]+"//"+e[2]+"/playmv/"+a;romance_song()});$("body").on("click",".list-menu .gray",function(){var e=window.location.href.split("/");if($(this).data("hasmv")){a=$(this).data("songid")}else{a=null}o=e[0]+"//"+e[2]+"/mv/"+a;romance_song()})});(function(e){var i=e(".product-dialog");e(".clients-android").on("click",function(){i.dialog({width:618,stick:true}).dialog("show")});$clientsPc=e(".clients-pc");if(/mac/i.test(navigator.userAgent)){$clientsPc.show().attr("href","//download.qianqian.com/channel/2/web_xiangqingad").attr("data-log",'{ "pos":"mac_down" }').html('<span class="icon css-icon-mac"></span>Mac版本')}else{$clientsPc.show();e(".clients-wrapper-pc .send-vip").show();var n;$clientsPc.on("mouseenter",function(){var i=e(".pc-tips");ting.loadChildImages(i,arguments.callee);i.show();ting.logger.log("exposure",{page:ting.logger.getPage(),expoitem:"pannel_dl_qianqian"})}).on("mouseleave",function(){n=setTimeout(function(){e(".pc-tips").hide()},100)});e(".pc-tips").on("mouseenter",function(){clearTimeout(n)}).on("mouseleave",function(){e(this).hide()}).on("click",function(){ting.logger.log("click",{pos:"dl_qianqian",page:"panel",sub:ting.logger.getPage()})})}e(".clients-iphone").click(function(){var i=295;var n=e(".ios-tips");ting.loadChildImages(n,arguments.callee);n.css("display")==="none"?n.css("left",i).fadeIn():n.fadeOut();return false});e(".ios-tips .close").click(function(){e(".ios-tips").fadeOut();return false});e(".clients-iphone,.clients-pc,.clients-android,.clients-ipad",e("#download-clients")).bind("click",function(){ting.logger.plogClick(e(this).data("log").pos)})})(jQuery);(function(e){var i=e(".musician-top .dynamic-control-btn img");var n="../../../../static3.qianqian.com/web/static/i/QFBYZD9V.png"/*tpa=http://static3.qianqian.com/web/static/i/QFBYZD9V.png*/;var t="../i/9oVSAVkU.png"/*tpa=http://static4.qianqian.com/web/static/i/9oVSAVkU.png*/;var a="250px";var o="96px";var s="down";e(".musician-top .dynamic-control-btn").click(function(){var i=e(this);if(s=="down"){e(".musician-top .dynamic-body-wrapper").stop().animate({height:a},300,function(){i.addClass("arrow-up");s="up"})}else{e(".musician-top .dynamic-body-wrapper").stop().animate({height:o},300,function(){i.removeClass("arrow-up");s="down"})}})})(jQuery);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/