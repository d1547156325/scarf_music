(function(t,e){t.widget("http://static4.qianqian.com/web/static/j/ting.roll",{options:{total:null,rollNum:0,screen:".page-list-wrap",rollList:".page-list",leftBtn:".page-prev",leftBtnDown:"page-prev-click",rightBtn:".page-next",rightBtnDown:"page-next-click",pageNav:".page-index",pageActive:".page-active",singleWidth:null,speed:"slow",callBack:function(){}},_create:function(){var e=this,n=e.options,l=e.element;e.widgetEventPrefix="roll.";e.rollInner=t(n.screen,l);e.rollList=t(n.rollList,l);e.leftBtn=t(n.leftBtn,l);e.rightBtn=t(n.rightBtn,l);e.itemNum=n.rollNum?Math.ceil(e.rollList.children().length/n.rollNum):e.rollList.children().length;e.rollLength=e.rollInner.width();e.pageNav=t(n.pageNav,l);e.containNum=n.singleWidth?Math.ceil(e.rollLength/n.singleWidth):1;e.currentNum=e.containNum;e.rolling=false;n.callBack(e);e.bindEvent()},ajaxload:function(){var e=this,n=e.options,l=e.element;var i={};i.start=t("li",e.rollList).length;i.size=15;t.get(n.ajaxUrl,i,function(n){var l=e.rollList.append(n.data.html);e.itemNum=t("li",e.rollList).length;new Function(n.data.js).call(l)},"json")},bindEvent:function(){var e=this,n=e.options,l=e.element,i=0,r={};t(n.leftBtn+","+n.rightBtn+","+n.pageNav,l).bind("click",function(a){if(e.rolling)return false;var o=0;var u=t(a.currentTarget).hasClass(n.pageNav.substr(1));var s=e.pageNav.index(t(a.target));if(a.currentTarget==e.leftBtn[0]){o=1;if(e.currentNum==e.containNum){return false}}else if(a.currentTarget==e.rightBtn[0]){o=-1;if(e.currentNum>=e.itemNum){return false}}else if(u){o=e.currentNum-1-s}e.rolling=true;i=u?-1*e.pageNav.index(t(a.target))*e.rollLength:o*e.rollLength;if(e.containNum>1&&n.singleWidth){if(e.itemNum-e.currentNum<e.containNum&&o<0||2*e.containNum>e.currentNum&&o>0){o=o*(e.itemNum%e.containNum)}else{o=o*e.containNum}i=o*n.singleWidth}r=u?{opacity:"hide"}:{left:"+="+i+"px"};e.rollList.animate(r,n.speed,function(){e.rolling=false;if(u){t(this).css({left:i+"px"}).show()}if(n.total&&n.ajaxUrl){if(e.currentNum>=e.itemNum&&e.itemNum<n.total){e.ajaxload()}}e.currentNum-=o;ting.LL.add(t(".lazyload",e.rollList.children()[e.currentNum-1]));if(t(n.pageNav,l).length){t(n.pageActive,l).removeClass(n.pageActive.substr(1));t(t(n.pageNav,l)[e.currentNum-1]).addClass(n.pageActive.substr(1))}});return false})}})})(jQuery);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/