define(["core/utils","../vip/top_right_menu"],function(e){var i=/\/king/.test(location.pathname);var a=location.protocol;ting.DM=".baidu.com";if(location.host.indexOf("http://static4.qianqian.com/web/static/j/taihe.com")!=-1){ting.DM=".taihe.com"}else if(location.host.indexOf("http://static4.qianqian.com/web/static/j/qianqian.com")!=-1){ting.DM=".qianqian.com"}window.enterState=function(n){var s,t,l,o,r,c,u;l=encodeURIComponent(location.href);s={sTemplate:"guest",sUserName:"",sSpaceLink:"",sProfileURL:"http://passport.baidu.com/#0,1",sHomeURL:"http://passport.baidu.com/v2/?ucenteradduname",sPaylistURL:"/paylist",sMessageURL:"/user/message",sBindURL:"/user/bind",sBaiduURL:"http://www.baidu.com/",sBaiduPrivilegeURL:"http://tequan.baidu.com/?sc=music",sBaiduMusicMall:"/mall?from=pcweb_music_qrcode",sLoginURL:"javascript:;",sRegURL:"javascript:;",sLogoutURL:"javascript:;",sOpenMbox:'<a href="javascript:void(0)" onclick="return ting.media.openPlayer(),false">音乐盒</a>',sMusicVIPURL:"/home/vip?pst=home"+(i?"&_vk=pay_k_load":""),sUsercenterURL:"/home/user",sReceiveURL:"/home/gift",enable_fee:false,sUserVipURL:"/home/vip"+(i?"?_vk=pay_k_load":""),vipIcon:"<span title='未开通VIP会员' class='power-icon-min index-icon-vipidentity'></span>",activeVipIcon:"<span title='成为音乐VIP会员' class='power-icon-min index-icon-vip-active'></span>",columnHtml:'<li><a class="my-column" href="http://static4.qianqian.com/column/manage" target="_blank" rel="nofollow"><i></i><span>我的专栏</span></a></li>',vipInfo:""};var d='<div id="menu-user" style="display:none; width:234px;" class="mn-tip mnd-tip">                             <span class="u_ddl_arrow"> <em></em> </span>                            <div class="mnd">                                 <div class="uuser-info">                                     <div class="uuser-img">                                         <a href="#{sHomeURL}" target="_blank">                                             <img src="#{avatar}" />                                             <i class="vip-info #{vipInfo}"></i>                                         </a>                                     </div>                                     <p class="uuser-name"><a href="#{sHomeURL}" target="_blank">#{sUserName}</a></p>                                 </div>                                 <div class="uuser-active">                                     <ul class="clearfix">                                         <li id="messageDynamic"><a href="http://static4.qianqian.com/user/dynamic" target="_blank"><i></i><span>动态</span><b>#{dynamic_num}</b></a></li>                                         <li id="messageFriend" class="center"><i></i><a href="http://static4.qianqian.com/user/friend" target="_blank"><span>关注</span><b>#{friend_num}</b></a></li>                                         <li id="messageFans"><i></i><a href="http://static4.qianqian.com/user/fans" target="_blank"><span>粉丝</span><b>#{follow_num}</b></a></li>                                     </ul>                                 </div>                                 <ul class="uuser-list">                                      #{columnHtml}                                    <li><a class="my-songlist" href="#{sHomeURL}" target="_blank" rel="nofollow"><i></i><span>我的歌单</span></a></li>                                     <li><a class="my-paylist" href="#{sPaylistURL}" target="_blank" rel="nofollow"><i></i><span>购买记录</span></a></li>                                     <li><a class="my-info" href="#{sProfileURL}" target="_blank" rel="nofollow"><i></i><span>账号设置</span></a></li>                                     <li><a class="my-bind" href="#{sBindURL}" target="_blank" rel="nofollow"><i></i><span>分享绑定</span></a></li>                                     <li><a href="#{sLogoutURL}" class="logout" id="logout" rel="nofollow"><i></i><span>退出</span></a></li>                                 </ul>                             </div>';var m='             <ul >                 <li class="line userNav-li" >|</li>                 <li class="userNav-li"><a class="home-page" href="#{sBaiduURL}" target="_blank">百度首页</a></li>                 <li class="userNav-li" id="receiveActive" style="margin-right:20px; display:none;"><a rel="nofollow" href="#{sReceiveURL}"><span class="limit-active"></span>免费体验特权！</a></li>                 <li  class="uname mn-lk-w">                     <a id="anchor-user-name" href="#{sHomeURL}" target="_blank">#{sSourceIcon}#{sUserName}<span class="mn-lk icon-arrow"></span></a>                     <a id="anchor-user-vip" href="#{sHomeURL}"></a>'+d+'</li>                 <li class="userNav-li"><a id="messageHint" href="http://static4.qianqian.com/message" target="_blank" rel="nofollow"><i></i>消息</a></li>                 <li class="vip-intro userNav-li"><a id="userCenter" href="#{sMusicVIPURL}" target="_blank">我的VIP</a></li>                 <li class="userNav-li"><a target="_blank" href="#{sBaiduMusicMall}" >音乐商城</a></li>             </ul>         ';var f="登录";if($("body").data("domain")=="taihe0514"){f="一键登录"}var p='<ul><li class="line userNav-li">|</li>            <li id="receiveActive" style="margin-right:20px; display:none;" class="userNav-li">            <a rel="nofollow" href="#{sReceiveURL}"><span class="limit-active"></span>免费体验特权！</a>            </li>            <li class="userNav-li"><a  target="_blank" href="#{sBaiduURL}">百度首页</a></li>            <li ><a rel="nofollow" href="#{sLoginURL}" id="loginbtn">'+f+'</a></li>            <li class="userNav-li"><a target="_blank" href="#{sRegURL}" id="registBtn" rel="nofollow">注册</a></li>            <li class="vip-intro userNav-li"><a  target="_blank" href="#{sMusicVIPURL}"><span class="z1">开通VIP</span></a></li>            <li class="userNav-li"><a target="_blank" href="#{sBaiduMusicMall}" >音乐商城</a></li>            <li class="userNav-li" id="oldMp3Entry" style="display:none"><a href="http://static4.qianqian.com/?goto=old_mp3">MP3旧版</a></li>            </ul>';var g='<ul>                                 <li class="uname mn-lk-w">                                     <a id="anchor-user-name" href="#{sHomeURL}" target="_blank">                                         <i class="user-name-bd-icon"></i>                                         &nbsp;#{sSourceIcon}#{sUserName}                                     </a>'+d+"</li>                             </ul>";var v='<a rel="nofollow" href="#{sLoginURL}" id="loginbtn"><i class="user-name-bd-icon"></i>&nbsp;一键登录</a>';var h="";try{if(isHao123Header){h=isHao123Header;m=g;p=v}}catch(y){}t={guest:p,user:m};u=function(){document.getElementById("userCenter").style.display="block";document.getElementById("userCenterLine").style.display="block"};showReceive=function(){document.getElementById("receiveActive").style.display="block"};oCallbacks={guest:function(){var e=document.getElementById("loginbtn");var i=ting.passport.login||function(){ting.passport.checkLogin(function(){window.location.reload()},function(){},function(){},function(){})};if(e){if(!window.attachEvent){e.addEventListener("click",i,false)}else{e.attachEvent("onclick",i)}}else{}var a=document.getElementById("registBtn");var n=ting.passport.regist;if(a){if(!window.attachEvent){a.addEventListener("click",n,false)}else{a.attachEvent("onclick",n)}}else{}oCallbacks.invoked=true},user:function(){var i,a,n,s,t,l;i=document.getElementById("anchor-user-name");a=document.getElementById("menu-user");n=-1;s=500;t=false;l=false;function o(){if(t){if(l){a.style.display="none";if(h){i.className="anchor-user-name-bg-none"}l=false;clearInterval(n);n=-1}}}if(!!!i){return}i.onmouseenter=function(){if(!l){a.style.display="block";if(h){i.className="anchor-user-name-bg"}l=true;t=false;if(n<0){n=setInterval(o,s)}}else{o()}return false};i.onmouseleave=function(){t=true};a.onmouseover=function(){t=false};a.onmouseout=function(){t=true};i.onmouseover=function(){t=false};i.onmouseout=function(){t=true};setTimeout(function(){e.tingApi("baidu.ting.ugccenter.checkFollRedPoint",{typeids:"1,2"}).done(function(e){e=e.result;if(e.msg_flag&&e.msg_flag>0){if(document.getElementById("messageHint")){var i=document.getElementById("messageHint").firstChild;i.style.display="block"}}if(e.follow_flag&&e.follow_flag>0){if(document.getElementById("messageFans")){var i=document.getElementById("messageFans").firstChild;i.style.display="block"}}})},1e3);var r=function(){var e=this.firstChild;e.style.display="none"};if(!window.attachEvent){if(document.getElementById("messageFans")){document.getElementById("messageFans").addEventListener("click",r,false)}}else{if(document.getElementById("messageFans")){document.getElementById("messageFans").attachEvent("onclick",r)}}var c=e.getWebChat({setUnreadM:function(e){if(document.getElementById("messageHint")){var i=document.getElementById("messageHint").firstChild;i.style.display="block"}},setFans:function(e){if(e.serverid==10101){if(document.getElementById("messageFans")){var i=document.getElementById("messageFans").firstChild;i.style.display="block"}}}});$(".my-bind").click(function(e){ting.logger.log("click",{page:"jumppannel",pos:"sharebind"})});var u=document.getElementById("logout");var d=ting.passport.logout||function(){ting.passport.checkLogin(function(){window.location.reload()},function(){},function(){},function(){})};if(u){if(!window.attachEvent){u.addEventListener("click",d,false)}else{u.attachEvent("onclick",d)}}else{}oCallbacks.invoked=true}};function b(e,i){e=String(e);var n=Array.prototype.slice.call(arguments,1),s=Object.prototype.toString;if(n.length){if(i.thirdType=="taihe"){i.sProfileURL=a+"//passport.taihe.com/v2/web/settings.html?tpl=baidu_music"}n=n.length==1?i!==null&&/\[object Array\]|\[object Object\]/.test(s.call(i))?i:n:n;return e.replace(/#\{(.+?)\}/g,function(e,i){var a=n[i];if("[object Function]"==s.call(a)){a=a(i)}return"undefined"==typeof a?"":a})}return e}c=function(e,i){e=e||{};for(var a in s){if(e.hasOwnProperty(a)){continue}e[a]=s[a]}o=document.getElementById(n);if(o){o.innerHTML=b(t[e["sTemplate"]],e)}if(e.enable_fee){showReceive();if(e["sTemplate"]=="user"){u()}}oCallbacks[e["sTemplate"]]();if(i){i()}if(ting.vipTip)ting.vipTip.call();ting.vipTipReady=true;return false};var _=function(e){var i=$("#user-info");if(!i.length){return}if(e||h){i.html('<div class="info">                             <span class="icon-text">播放记录</span>                             <span class="icon-arrow"></span>                             </div>').removeClass("none");i.hoverShow($("#play-info"),{onShow:function(){require(["ting/playInfo"])},onHide:function(){},delay:50})}else{i.html("").addClass("none")}};var k=function(e){if(e&&e.data){var i=e.data;if(i.vip&&i.vip.cloud){window.BDUS.vipState=i.vip.cloud.service_level}if(i.status){window.BDUS.status=i.status}else{window.BDUS.status="0"}}};var w=function(e){var i={id:"public_tuijian_suibiantingting",name:"随便听听",img:"../../../../static2.qianqian.com/web/static/i/ZT9OrDsY.png"/*tpa=http://static2.qianqian.com/web/static/i/ZT9OrDsY.png*/};if(e&&e.errorCode==22e3){i={id:"private",name:"私人频道",img:"../../../../static3.qianqian.com/web/static/i/3KRB7uTd.png"/*tpa=http://static3.qianqian.com/web/static/i/3KRB7uTd.png*/}}var a=['<li class="entry-item first-item">','<a target="_blank" href="http://fm%27+ting.dm+/"/#/channel/"+i.id+'">','<div class="entry-item-btn">','<span class= "entry-icon" style="background:url('+i.img+');"></span>','<span class= "entry-text">'+i.name+"</span>","</div>","</a>","</li>"].join("");var n=$("#mbox-entry-list");var s=n.html();n.html(a+s)};function L(e){var i,a,n,s,t,l,o;n=parseInt(e.errorCode);s=e.data;a={};t=e.data.passInfo||{};l=e.data.showNum||{};if(n==22e3){a.thirdType=e.data.thirdType;ting.passport&&(ting.passport.isLogin=true);ting.userInfo=e.data;i=s.bdName?s.bdName:s.bdEmail?s.bdEmail:s.bdMobile?s.bdMobile:t.displayname;a.sUserName=i;a.sTemplate="user";a.sHomeURL="/user";a.enable_fee=!!s.enable_fee;if(s.vip){try{var r=s.vip.cloud.service_level}catch(u){}if(ting.vip){o=ting.vip.genInitFn(r,s.vip_expiry)}}else{if(ting.vip){o=ting.vip.genInitFn("not")}}if(!s.bdName&&!s.bdEmail&&!s.bdMobile&&t.incomplete_user==1){a.sSourceIcon='<img src="'+t.source_icon+'" width="16" height="16" style="vertical-align:top;margin-right:3px" />'}a.avatar=t.avatar_small;a.dynamic_num=l.dynamic_num||0;a.follow_num=l.follow_num||0;a.friend_num=l.friend_num||0;var d=e.data.ugcFlag||"0";if(d[0]>0){a.vipInfo="vip"+d[0]}else if(d[2]==1){a.vipInfo="renzheng"}else if(d[1]==1){a.vipInfo="daren"}if(!s.specialRight){a.columnHtml=""}_(a)}else{a.enable_fee=!!s.enable_fee;a.sTemplate="guest";if(ting.vip){o=ting.vip.genInitFn("anonymous")}_(null)}k(e);w(e);return c(a,o)}return L}("userbar")});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/