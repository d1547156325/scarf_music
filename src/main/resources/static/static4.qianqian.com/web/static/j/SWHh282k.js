define(["core/utils","widget/pop_window/pop_window","widget/toast/toast","page/dynamic/add_friend","page/uuser/friend"],function(e,c,i){var o=$(".spec-collect"),l=$(".spec-zan-box"),n=$(".spec-collected"),a=$(".spec-collect-text"),t=$(".spec-zan-text"),s=$(".container"),d=s.data("specialid")||"",r=s.data("columnid")||"",f=$(".spec-zan"),p=$(".spec-zaned");var g=function(){v();u();if(ting&&ting.logger){ting.logger.log("click",{page:"zhuanti",pos:"zt"})}},u=function(){if(d){e.tingApi("baidu.ting.ugcspecial.addSpecialReadNum",{specialid:d}).done(function(e){}).fail(function(e){})}},v=function(){l.on("click",".spec-collect",m).on("click",".spec-collected",b).on("click",".spec-zan",z).on("click",".spec-zaned",C);s.on("click",".redirect",function(){if(ting&&ting.logger){ting.logger.log("click",{page:"zhuanti",pos:"fromzt"})}}).on("click",".follow-hook",function(){if(ting&&ting.logger){ting.logger.log("click",{page:"zhuanti",pos:"fromauthor"})}}).on("click",".spec-back-more",function(){if(ting&&ting.logger){ting.logger.log("click",{page:"zhuanlan",pos:"frommore"})}})},k=function(e,c,o){i.show({innerSelect:".toast-tmpl",data:{cls:e,text:c},callback:o})},m=function(){if(!ting.userInfo){ting.passport.checkLogin(function(e){window.location.reload()});return false}var c=$(this);var i={list_id:d,source:5};l.off("click",".spec-collected");l.off("click",".spec-collect");c.addClass("disable");e.tingApi("baidu.ting.ugcdiy.addFavoriteDiy",i).done(function(e){var i=a.text();if(isNaN(i)){i=1}else{i=Number(i)+1}a.text(i);c.addClass("spec-collected").removeClass("spec-collect");l.on("click",".spec-collected",b);c.removeClass("disable")}).fail(function(e){if(e.error_code=="22334"){var i="已经收藏";c.addClass("spec-collected").removeClass("spec-collect")}else{var i="收藏失败,刷新页面重试下"}k("fail",i);l.on("click",".spec-collected",b);c.removeClass("disable")})},b=function(){if(!ting.userInfo){ting.passport.checkLogin(function(e){window.location.reload()});return false}var c=$(this);var i={list_id:d,source:5};c.addClass("disable");l.off("click",".spec-collected");l.off("click",".spec-collect");e.tingApi("baidu.ting.ugcdiy.deleteFavoriteDiy",i).done(function(e){var i=a.text();if(i==1){i="收藏"}else{i=Number(i)-1}a.text(i);c.addClass("spec-collect").removeClass("spec-collected");l.on("click",".spec-collect",m);c.removeClass("disable")}).fail(function(){l.on("click",".spec-collect",m);c.removeClass("disable")})},z=function(){if(!ting.userInfo){ting.passport.checkLogin(function(e){window.location.reload()});return false}var c=$(this);var i={actid:"special",pid:"special",tid:"thumb",itemid:r+"_"+d};l.off("click",".spec-zan").off("click",".spec-zaned");c.addClass("disable");e.tingApi("baidu.ting.favorite.addFavorite",i).done(function(e){c.addClass("spec-zaned").removeClass("spec-zan");var i=t.text();if(isNaN(i)){i=1}else{i=Number(i)+1}t.text(i);l.on("click",".spec-zaned",C);c.removeClass("disable")}).fail(function(){l.on("click",".spec-zaned",C);k("succ","点赞失败!");c.removeClass("disable")})},C=function(){var c=$(this);var i={actid:"special",pid:"special",tid:"thumb",itemid:r+"_"+d};if(!ting.userInfo){ting.passport.checkLogin(function(e){window.location.reload()});return false}l.off("click",".spec-zan").off("click",".spec-zaned");c.addClass("disable");e.tingApi("baidu.ting.favorite.delFavorite",i).done(function(e){var i=t.text();if(i==1){i="赞"}else{i=Number(i)-1}t.text(i);c.addClass("spec-zan").removeClass("spec-zaned");l.on("click",".spec-zan",z);c.removeClass("disable")}).fail(function(){k("succ","取消赞失败!");c.removeClass("disable");l.on("click",".spec-zan",z)})};g()});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/