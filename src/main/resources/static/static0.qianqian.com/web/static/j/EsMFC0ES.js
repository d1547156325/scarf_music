(function(){var e=false,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(r){var n=this.prototype;e=true;var i=new this;e=false;for(var o in r){i[o]=typeof r[o]=="function"&&typeof n[o]=="function"&&t.test(r[o])?function(e,t){return function(){var r=this._super;this._super=n[e];var i=t.apply(this,arguments);this._super=r;return i}}(o,r[o]):r[o]}function s(){if(!e&&this.init)this.init.apply(this,arguments)}s.prototype=i;s.prototype.constructor=s;s.extend=arguments.callee;return s}})();(function(e){Porthole={trace:function(t){if(e["console"]!==undefined){}else{}},error:function(t){if(e["console"]!==undefined){e.console.error("Porthole: "+t)}}};Porthole.WindowProxy=function(){};Porthole.WindowProxy.prototype={post:function(e,t){},addEventListener:function(e,t){},removeEventListener:function(e){}};Porthole.WindowProxyBase=Class.extend({init:function(t){if(t===undefined){t=""}this.targetWindowName=t;this.origin=e.location.protocol+"//"+e.location.host;this.eventListeners=[]},getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},post:function(t,r){if(r===undefined){r="*"}this.dispatchMessage({data:t,sourceOrigin:this.getOrigin(),targetOrigin:r,sourceWindowName:e.name,targetWindowName:this.getTargetWindowName()})},addEventListener:function(e){this.eventListeners.push(e);return e},removeEventListener:function(e){var t;for(var r=0,n=this.eventListeners.length;r<n;r++){if(this.eventListeners[r]===e){t=r}}this.eventListeners.splice(t,1)},dispatchEvent:function(e){var t;for(t=0;t<this.eventListeners.length;t++){try{this.eventListeners[t](e)}catch(r){}}},createIFrameProxy:function(){var e=document.createElement("iframe");e.setAttribute("id",this.proxyIFrameName);e.setAttribute("name",this.proxyIFrameName);e.setAttribute("src",this.proxyIFrameLocation);e.setAttribute("frameBorder","1");e.setAttribute("scrolling","no");e.setAttribute("width",30);e.setAttribute("height",30);e.setAttribute("style","position: absolute; left: 0; top: -100px;");if(e.style.setAttribute){e.style.setAttribute("cssText","position: absolute; left: 0; top: -100px;")}document.body.appendChild(e);return e},refreshIframe:function(e){this.proxyIFrameElement.src=this.proxyIFrameLocation}});Porthole.WindowProxyLegacy=Porthole.WindowProxyBase.extend({init:function(e,t){this._super(t);if(e!==null){this.proxyIFrameLocation=e;this.proxyIFrameName=this.targetWindowName+"ProxyIFrame";this.proxyIFrameElement=this.createIFrameProxy()}else{this.proxyIFrameElement=null;throw new Error("proxyIFrameUrl can't be null")}},getTargetWindow:function(){return Porthole.WindowProxy.getTargetWindow(this.targetWindowName)},splitString:function(e){var t=2e3,r=0,n=[],i=e.length;while(r<i){n.push(e.substr(r,t));r+=t}return n},dispatchLock:false,dispatchMessage:function(t){if(this.dispatchLock){return}this.dispatchLock=true;var r=e.encodeURIComponent;if(this.proxyIFrameElement){var n=r(Porthole.WindowProxy.serialize(t)),n=this.splitString(n);var i=n.length,o=this;for(var s in n){(function(e){setTimeout(function(){var s={end:e==i-1,data:n[e],sourceOrigin:t.sourceOrigin,targetOrigin:t.targetOrigin,sourceWindowName:t.sourceWindowName,targetWindowName:t.targetWindowName};var a=o.proxyIFrameLocation+"#"+r(Porthole.WindowProxy.serialize(s));o.proxyIFrameElement.setAttribute("src",a);o.proxyIFrameElement.width=o.proxyIFrameElement.width<=50?100:50;if(s.end){o.dispatchLock=false}},e*100)})(s)}}}});Porthole.WindowProxyHTML5=Porthole.WindowProxyBase.extend({init:function(e,t){this._super(t);if(t){this.proxyIFrameLocation=e;this.proxyIFrameName=this.targetWindowName;this.proxyIFrameElement=this.createIFrameProxy()}this.eventListenerCallback=null},getTargetWindow:function(){if(this.targetWindowName){return frames[this.targetWindowName]}else{return parent}},dispatchMessage:function(e){this.getTargetWindow().postMessage(Porthole.WindowProxy.serialize(e),e.targetOrigin)},addEventListener:function(t){if(this.eventListeners.length===0){var r=this;this.eventListenerCallback=function(e){r.eventListener(r,e)};e.addEventListener("message",this.eventListenerCallback,false)}return this._super(t)},removeEventListener:function(t){this._super(t);if(this.eventListeners.length===0){e.removeEventListener("message",this.eventListenerCallback);this.eventListenerCallback=null}},eventListener:function(e,t){var r=Porthole.WindowProxy.unserialize(t.data);if(r&&(e.targetWindowName==""||r.sourceWindowName==e.targetWindowName)){e.dispatchEvent(new Porthole.MessageEvent(r.data,t.origin,e))}}});if(typeof e.postMessage!=="function"){Porthole.trace("Using legacy browser support");Porthole.WindowProxy=Porthole.WindowProxyLegacy.extend({})}else{Porthole.trace("Using built-in browser support");Porthole.WindowProxy=Porthole.WindowProxyHTML5.extend({})}Porthole.WindowProxy.serialize=function(e){if(typeof JSON==="undefined"){throw new Error("Porthole serialization depends on JSON!")}return JSON.stringify(e)};Porthole.WindowProxy.unserialize=function(e){if(typeof JSON==="undefined"){throw new Error("Porthole unserialization dependens on JSON!")}try{var t=JSON.parse(e)}catch(r){return false}return t};Porthole.WindowProxy.getTargetWindow=function(e){if(e===""){return top}return self};Porthole.MessageEvent=function t(e,r,n){this.data=e;this.origin=r;this.source=n};Porthole.WindowProxyDispatcher={data:[],windowProxy:null,joinString:function(){var t=e.decodeURIComponent,r=Porthole.WindowProxy.unserialize(t(document.location.hash.substr(1))),n=Porthole.WindowProxyDispatcher;if(!n.windowProxy){var i=Porthole.WindowProxy.getTargetWindow(r.targetWindowName);n.windowProxy=n.findWindowProxyObjectInWindow(i,r.sourceWindowName)}n.data.push(r.data);if(r.end){n.forwardMessageEvent()}},forwardMessageEvent:function(t){var r,n=e.decodeURIComponent,i,o,s=Porthole.WindowProxyDispatcher;r=s.data.join("");s.data=[];if(r.length>0){try{r=Porthole.WindowProxy.unserialize(n(r))}catch(a){return}o=s.windowProxy;if(o){if(o.origin===r.targetOrigin||r.targetOrigin==="*"){o.dispatchEvent(new Porthole.MessageEvent(r.data,r.sourceOrigin,o))}else{Porthole.error("Target origin "+o.origin+" does not match desired target of "+r.targetOrigin)}}else{Porthole.error("Could not find window proxy object on the target window")}}},findWindowProxyObjectInWindow:function(e,t){var r;if(e.RuntimeObject){e=e.RuntimeObject()}if(e){for(r in e){if(e.hasOwnProperty(r)){if(e[r]!==null&&typeof e[r]==="object"&&e[r]instanceof e.Porthole.WindowProxy){return e[r]}}}}return null},start:function(){if(e.addEventListener){e.addEventListener("resize",Porthole.WindowProxyDispatcher.joinString,false)}else if(document.body.attachEvent){e.attachEvent("onresize",Porthole.WindowProxyDispatcher.joinString)}else{Porthole.error("Cannot attach resize event")}}}})(this);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/