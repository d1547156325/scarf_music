(function(i,t){var e="auto",s=1e3,p=0,o={},n=0,h=0,a,u,l=0,d={pass:"pass-message",error:"error-message",info:"info-message",warning:"warning-message"};i.widget("ting.popup",{options:{visible:false,width:e,height:e,x:e,y:e,mask:true},_create:function(){var t=this,e=t.element,s=t.options;t.widgetEventPrefix="popup.";t.$popupDiv=i(['<div class="popup-wrapper">','<div class="popup popup-content-hook">',"</div>",'<div class="popup-footer">',"</div>","</div>"].join(""));i(".popup-content-hook",t.$popupDiv).append(e);i("body").append(t.$popupDiv)},_init:function(){var i=this,t=i.element,e=i.options;i.size(e.width,e.height);i.position(e.x,e.y);i.visible(!!e.visible)},visible:function(i){var e;if(t===i){return this._visible}else{if(this._visible==!!i)return;e=i?"show":"hide";if(false!==this._trigger("befor"+e,null,null)){this.options.mask&&(i?this.maskId=f():this.maskId!=t&&f(this.maskId));i?this.$popupDiv.show():this.$popupDiv.hide();this._visible=!!i;this._trigger("after"+e,null,null)}}},size:function(i,s){if(t===i){return{width:this._width,height:this._height}}else if(t===s){if(i==e){s=e}else{s=i.height;i=i.width}}i=i==e?this.$popupDiv.width():i;s=s==e?this.$popupDiv.height():s;this.$popupDiv.css({width:i,height:s});this._width=i;this._height=s},position:function(s,p){var o;if(t===s){return{x:this._x,y:this._y}}else if(t===p){if(s==e){p=e}else{p=s.y;s=s.x}}if(s==e||p==e){o=this.size()}s=s==e?Math.max(i(document).scrollLeft()+(i(window).width()-o.width>>1),0):s;p=p==e?Math.max(i(document).scrollTop()+(i(window).height()-o.height>>1),0):p;this.$popupDiv.css({top:p,left:s});this._x=s;this._y=p}});function r(){a&&a.css({width:Math.max(i(document).width(),i(window).width()),height:Math.max(i(document).height(),i(window).height())})}function c(t){a=a||i('<div class="popup-mask"></div>').appendTo(i("body"));r();a.toggle(t);h!=2&&t?i(window).bind("scroll",r):i(window).unbind("scroll",r);h=t?2:1}function f(i){if(t==i){o[p]=true;n++;c(true);return p++}else{o[i]&&--n||c(false);delete o[i]}}function g(){var t=i(['<div class="popup-message">','<span class="popup-icon"></span>','<span class="popup-text"></span>',"</div>"].join(""));t.$text=i(".popup-text",t);t.className="";return t.popup()}i.extend(i.ting.popup,{message:function(i,t,p){u=u||g();u.$text.text(i);u.removeClass(u.className).addClass(u.className=d[t]||d.info);u.popup("visible",true).popup("position",e);clearTimeout(l);l=setTimeout(function(){u.popup("visible",false)},typeof p=="number"&&p>0?p:s)},messageOk:function(t,e){i.ting.popup.message(t,"pass",e)},messageFailed:function(t,e){i.ting.popup.message(t,"error",e)}})})(jQuery);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/