(function(t,i){t.widget("ting.songCollection",{options:{tag:""},_create:function(){var t=this,i=t.element;this.$list=i.find(".col-list .song-list");this.$foldBtn=i.find(".col-list-all");this.$cover=i.find(".cover-img");this.$collect=i.find(".col-collect");this.$play=i.find(".col-play,.play-list-all");t._initEvent()},_initEvent:function(){var i=this,l=i.element;i.$foldBtn.bind("click",function(){var l=t.ting.songCollection.$upWidget;if(l&&!t.contains(l[0],i.$foldBtn[0])){t.ting.songCollection.$upWidget.songCollection("foldList")}i.foldList();return false});l.find(".cover-link,.title-link").bind("click",function(){var t=i.$collect.data("playlist"),l=t.listid,n=i.element.index(),s=i.element.parent().index(),e={page:"c_songlist_i",tag:i.options.tag,listid:t.listid,pos:this.className,col:n,row:s};if(ting&&ting.logger){ting.logger.log("click",e)}});i.$collect.bind("click",function(){var t=i.element.index(),l=i.element.parent().index();i.$collect.collectPlaylist({log:{page:"c_songlist_i",tag:i.options.tag,col:t,row:l}});return false});i.$play.bind("click",function(){var l=i.$collect.data("playlist").ids,n=i.$collect.data("playlist"),s=n.listid,e=i.element.index(),o=i.element.parent().index(),a={page:"c_songlist_i",tag:i.options.tag,listid:n.listid,pos:"play_songlist",col:e,row:o};if(l){l=l.split(",");ting.media.playSong(l,n);t.ajax({url:"/data/music/songlist/listen?playlistId="+s+"&t="+new Date*1});if(ting&&ting.logger){ting.logger.log("click",a)}t(this).tip().tip("tipup",{msg:"已开始播放！",iconClass:"tip-success"})}return false})},foldList:function(){if(this.$list.hasClass("fold-list")){this.$list.removeClass("fold-list").addClass("testttt");this.$foldBtn.text("收起").addClass("fold-up").removeClass("fold-down");t.ting.songCollection.$upWidget=this.element}else{this.$list.addClass("fold-list");this.$foldBtn.text("全部").addClass("fold-down").removeClass("fold-up");this.$upWidget=null}}})})(jQuery);

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/