define(["core/utils","widget/toast/toast","widget/ushare/ushare","domain_config"],function(i,t,a,n){var e=$(".rule");e.on("click",".rul-btn",function(i){e.find(".rul-bg").show()}).on("click",".rule-hot",function(i){e.find(".rul-bg").hide()});var s=$("#bang-wrapper");s.on("click",".icon-date",function(i){s.find(".qishu").show()}).on("click",".qishu-btn",function(i){s.find(".qishu").hide()});s.on("click",".qishu",function(i){$(".qishu-content").removeClass("qishu-visit");$(i.target).addClass("qishu-visit");$(".qishu-btn").removeClass("qishu-visit")});var o=$(".music-body"),c=function(i){a.init({onlyLetter:false,shareParam:{bdText:"推荐一张"+i.artist_name+"的专辑《"+(i.album_title||i.title)+"》 （分享自@千千音乐）",bdDesc:i.album_title,bdUrl:n.host+"/album/"+i.album_id+"?pst=redrank",bdPic:i.album_pic},apiParam:{userid:ting.userInfo&&ting.userInfo.userId,source_type:2,source_id:i.album_id},addNumCallBack:function(){if(i.artist_id){d({artist_id:i.artist_id,add_type:"share",album_id:i.album_id||""})}}});a.show()},u=function(a,n){if(ting&&ting.media){ting.passport.checkLogin(function(){$(".sellpage-content-box, .sellpage-content-box-bg").remove();ting.media.sellAlbum(a,n,{title:"购买专辑，为你心中的ta打榜助威！"});$("body").off("click",".sellpage-tobuy").on("click",".sellpage-tobuy",function(){var a=$(this).data("id")||"";var n=$(this).data("artistid")||"";var e=Number($("#sell-num").val())||0;var s={type_id:a,type:2,nums:e,action:"cloud",pay_type:"zfb",pay_client_type:2,callback_url:location.href+"?album_id="+a+"&artist_id="+n+"&shouhu_num="+e};i.tingApi("baidu.ting.pay.sorder",s).done(function(i){window.open(i.result.desk_url);$(".sellpage-content-box, .sellpage-content-box-bg").remove()}).fail(function(i){t.show({data:{cls:"fail",text:"操作失败，请稍后重试！"}})})})})}},l=function(i){if(!i.album_id){t.show({data:{cls:"fail",text:"该专辑不存在"}});return false}if(ting&&ting.media){ting.media.playAlbum(i.album_id);if(i.artist_id){d({artist_id:i.artist_id,add_type:"listen",album_id:i.album_id||""})}t.show({data:{cls:"succ",text:"开始播放"}})}},r=function(a){if(!a.album_id){t.show({data:{cls:"fail",text:"该专辑不存在"}});return false}ting.passport.checkLogin(function(){i.tingApi("baidu.ting.ugcdiy.addFavoriteDiy",{list_id:a.album_id||"",source:1}).done(function(i){t.show({data:{cls:"succ",text:"收藏成功"}});if(a.artist_id){d({artist_id:a.artist_id,add_type:"collect",album_id:a.album_id||""})}}).fail(function(i){switch(Number(i.error_code)){case 22713:errTip="已收藏过专辑 ";break;case 22001:errTip="操作失败，请稍候再试 ";break;case 22706:errTip="收藏数量已满，去个人中心管理收藏吧";break;default:errTip="操作失败，请稍候再试 "}t.show({data:{cls:"fail",text:errTip}})})})},d=function(a){if(a){var n=setTimeout(function(){clearTimeout(n);i.tingApi("baidu.ting.active.addUpNum",a).done(function(i){t.show({data:{cls:"succ",text:"up值添加成功"}})}).fail(function(i){})},2e3)}};o.on("click",".share",function(){var i=$(this).closest(".three-btn").data("album")||0;if(i){if(!ting.userInfo){ting.passport.checkLogin(function(t){c(i)})}else{c(i)}}}).on("click",".collect",function(){var i=$(this).closest(".three-btn").data("album")||0;if(i){if(!ting.userInfo){ting.passport.checkLogin(function(t){r(i)})}else{r(i)}}}).on("click",".play",function(){var i=$(this).closest(".three-btn").data("album")||0;if(i){if(!ting.userInfo){ting.passport.checkLogin(function(t){l(i)})}else{l(i)}}}).on("click",".buy-zj",function(i){u($(this),i)});return{addUpNums:function(i){d(i)}}});

/** If u are interested in our code and would like to make it robust, just contact us^^ <@音乐前端> **/
/** Generated by M3D. **/